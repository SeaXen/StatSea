[{"filePath":"D:\\Gravity\\StatSea\\frontend\\.eslintrc.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\App.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ActiveConnectionsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\AnalyticsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\BottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\CommandPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ConnectionGlobe.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DeviceDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DevicesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DnsQueryLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DockerManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\GroupManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NetworkComparison.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NetworkMap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NotificationCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\OnboardingTour.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\PredictionWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\QuotaManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SecurityAlertsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ServerStatusCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SettingsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SpeedtestPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SpeedtestSettingsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SystemDetailOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx:44:9\n  42 |\n  43 |     useEffect(() => {\n> 44 |         setDeviceStats(devices.slice(0, 5).map(() => ({\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  45 |             gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\n  46 |             mbps: Math.floor(Math.random() * 50),\n  47 |         })));","line":44,"column":9,"nodeType":null,"endLine":44,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Laptop, Smartphone, Tv } from 'lucide-react';\r\nimport { API_CONFIG } from '../config/apiConfig';\r\n\r\ninterface Device {\r\n    vendor?: string;\r\n    type?: string;\r\n    hostname?: string;\r\n    ip_address?: string;\r\n    ip?: string;\r\n}\r\n\r\nexport function TopDevicesWidget() {\r\n    const [devices, setDevices] = useState<Device[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchDevices = () => {\r\n            fetch(API_CONFIG.ENDPOINTS.DEVICES.LIST)\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (Array.isArray(data)) setDevices(data);\r\n                })\r\n                .catch(err => console.error(\"Failed to fetch devices\", err))\r\n                .finally(() => setLoading(false));\r\n        };\r\n\r\n        fetchDevices();\r\n        const interval = setInterval(fetchDevices, 10000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const getIcon = (vendor: string = '', type: string = '') => {\r\n        const v = (vendor || '').toLowerCase();\r\n        const t = (type || '').toLowerCase();\r\n        if (t === 'mobile' || v.includes('apple') || v.includes('samsung') || v.includes('pixel') || v.includes('phone')) return <Smartphone className=\"w-4 h-4\" />;\r\n        if (t === 'iot' || v.includes('tv') || v.includes('amazon') || v.includes('roku') || v.includes('google')) return <Tv className=\"w-4 h-4\" />;\r\n        return <Laptop className=\"w-4 h-4\" />;\r\n    };\r\n\r\n    const [deviceStats, setDeviceStats] = useState<{ gb: string; mbps: number }[]>([]);\r\n\r\n    useEffect(() => {\r\n        setDeviceStats(devices.slice(0, 5).map(() => ({\r\n            gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\r\n            mbps: Math.floor(Math.random() * 50),\r\n        })));\r\n    }, [devices]);\r\n\r\n    return (\r\n        <div className=\"bg-card border border-border rounded-xl p-6 shadow-sm\">\r\n            <h3 className=\"text-lg font-semibold mb-4 text-foreground\">Top Devices</h3>\r\n            <div className=\"space-y-3\">\r\n                {loading ? (\r\n                    [...Array(5)].map((_, i) => (\r\n                        <div key={i} className=\"flex items-center justify-between p-2\">\r\n                            <div className=\"flex items-center gap-3 w-full\">\r\n                                <div className=\"w-8 h-8 rounded-full bg-muted animate-pulse\" />\r\n                                <div className=\"space-y-2 flex-1\">\r\n                                    <div className=\"h-3 w-24 bg-muted animate-pulse rounded\" />\r\n                                    <div className=\"h-2 w-16 bg-muted animate-pulse rounded\" />\r\n                                </div>\r\n                                <div className=\"text-right space-y-2\">\r\n                                    <div className=\"h-3 w-12 bg-muted animate-pulse rounded ml-auto\" />\r\n                                    <div className=\"h-2 w-16 bg-muted animate-pulse rounded ml-auto\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <>\r\n                        {devices.slice(0, 5).map((device, i) => (\r\n                            <div key={i} className=\"flex items-center justify-between p-2 hover:bg-muted/50 rounded-lg transition-colors group\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-2 rounded-full bg-blue-500/10 text-blue-500 group-hover:bg-blue-500/20 transition-colors\">\r\n                                        {getIcon(device.vendor, device.type)}\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-sm font-medium text-foreground\">{device.hostname || device.ip_address || device.ip}</div>\r\n                                        <div className=\"text-xs text-muted-foreground font-mono\">{device.vendor || 'Unknown Vendor'}</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className=\"text-sm font-mono text-foreground\">{deviceStats[i]?.gb ?? '0.0'} GB</div>\r\n                                    <div className=\"text-xs text-green-500 dark:text-green-400\">Ôåæ {deviceStats[i]?.mbps ?? 0} Mbps</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        {devices.length === 0 && <div className=\"text-muted-foreground text-center py-6\">Connecting to detector...</div>}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopStatsRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\UptimeTimeline.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLogs'. Either include it or remove the dependency array.","line":48,"column":8,"nodeType":"ArrayExpression","endLine":48,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [deviceId, fetchLogs, range]","fix":{"range":[1677,1694],"text":"[deviceId, fetchLogs, range]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\UserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":137,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":149,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":149,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":161,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport axiosInstance from '../config/axiosInstance';\r\nimport {\r\n    Users,\r\n    UserPlus,\r\n    Search,\r\n    Edit2,\r\n    Trash2,\r\n    Shield,\r\n    Mail,\r\n    Calendar,\r\n    CheckCircle2,\r\n    XCircle,\r\n    UserCircle\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'sonner';\r\n\r\ninterface User {\r\n    id: number;\r\n    username: string;\r\n    email: string;\r\n    full_name: string | null;\r\n    is_active: boolean;\r\n    is_admin: boolean;\r\n    last_login: string | null;\r\n    created_at: string;\r\n}\r\n\r\nexport const UserManagement: React.FC = () => {\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive'>('all');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [modalMode, setModalMode] = useState<'add' | 'edit'>('add');\r\n    const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        email: '',\r\n        full_name: '',\r\n        password: '',\r\n        is_admin: false,\r\n        is_active: true\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Load from cache initially\r\n        const cachedUsers = localStorage.getItem('statsea_cache_users');\r\n        if (cachedUsers) {\r\n            setUsers(JSON.parse(cachedUsers));\r\n            setIsLoading(false);\r\n        }\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            if (!localStorage.getItem('statsea_cache_users')) {\r\n                setIsLoading(true);\r\n            }\r\n            const response = await axiosInstance.get('/admin/users');\r\n            setUsers(response.data);\r\n            localStorage.setItem('statsea_cache_users', JSON.stringify(response.data));\r\n        } catch (error) {\r\n            console.error('Failed to fetch users:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleOpenModal = (mode: 'add' | 'edit', user?: User) => {\r\n        setModalMode(mode);\r\n        if (mode === 'edit' && user) {\r\n            setSelectedUser(user);\r\n            setFormData({\r\n                username: user.username,\r\n                email: user.email,\r\n                full_name: user.full_name || '',\r\n                password: '', // Password remains empty unless changing\r\n                is_admin: user.is_admin,\r\n                is_active: user.is_active\r\n            });\r\n        } else {\r\n            setSelectedUser(null);\r\n            setFormData({\r\n                username: '',\r\n                email: '',\r\n                full_name: '',\r\n                password: '',\r\n                is_admin: false,\r\n                is_active: true\r\n            });\r\n        }\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            if (modalMode === 'add') {\r\n                await axiosInstance.post('/admin/users', formData);\r\n                toast.success('User created successfully');\r\n            } else if (selectedUser) {\r\n                const updateData: Partial<typeof formData> & { password?: string } = {\r\n                    email: formData.email,\r\n                    full_name: formData.full_name,\r\n                    is_admin: formData.is_admin,\r\n                    is_active: formData.is_active\r\n                };\r\n                if (formData.password) {\r\n                    updateData.password = formData.password;\r\n                }\r\n                await axiosInstance.put(`/admin/users/${selectedUser.id}`, updateData);\r\n                toast.success('User updated successfully');\r\n            }\r\n            setIsModalOpen(false);\r\n            fetchUsers();\r\n        } catch (error: unknown) {\r\n            const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n            if (axios.isAxiosError(error)) {\r\n                toast.error(error.response?.data?.detail || `Failed to ${modalMode} user`);\r\n            } else {\r\n                toast.error(errorMessage);\r\n            }\r\n        }\r\n    };\r\n\r\n    const toggleUserStatus = async (user: User) => {\r\n        try {\r\n            await axiosInstance.put(`/admin/users/${user.id}`, {\r\n                is_active: !user.is_active\r\n            });\r\n            toast.success(`User ${user.is_active ? 'deactivated' : 'activated'} successfully`);\r\n            fetchUsers();\r\n        } catch (_error) {\r\n            toast.error('Failed to update user status');\r\n        }\r\n    };\r\n\r\n    const toggleAdminStatus = async (user: User) => {\r\n        try {\r\n            await axiosInstance.put(`/admin/users/${user.id}`, {\r\n                is_admin: !user.is_admin\r\n            });\r\n            toast.success(`User updated successfully`);\r\n            fetchUsers();\r\n        } catch (_error) {\r\n            toast.error('Failed to update admin permissions');\r\n        }\r\n    };\r\n\r\n    const deleteUser = async (userId: number) => {\r\n        if (!window.confirm('Are you sure you want to delete this user? This action cannot be undone.')) return;\r\n\r\n        try {\r\n            await axiosInstance.delete(`/admin/users/${userId}`);\r\n            toast.success('User deleted successfully');\r\n            fetchUsers();\r\n        } catch (_error) {\r\n            toast.error('Failed to delete user');\r\n        }\r\n    };\r\n\r\n    const filteredUsers = users.filter(user => {\r\n        const matchesSearch = user.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.full_name?.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n        const matchesFilter = filterStatus === 'all' ||\r\n            (filterStatus === 'active' && user.is_active) ||\r\n            (filterStatus === 'inactive' && !user.is_active);\r\n\r\n        return matchesSearch && matchesFilter;\r\n    });\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <header className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n                        <Users className=\"w-8 h-8 text-blue-500\" />\r\n                        User Management\r\n                    </h1>\r\n                    <p className=\"text-slate-400 text-sm mt-1\">Manage system access, roles, and profiles</p>\r\n                </div>\r\n                <button\r\n                    className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl flex items-center gap-2 transition-all active:scale-95 text-sm font-medium\"\r\n                    onClick={() => handleOpenModal('add')}\r\n                >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    Add User\r\n                </button>\r\n            </header>\r\n\r\n            {/* Controls */}\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <div className=\"relative flex-1 group\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-blue-500 transition-colors\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by name, username or email...\"\r\n                        className=\"w-full bg-slate-900/50 border border-slate-800 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setFilterStatus('all')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'all' ? 'bg-blue-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        All Users\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFilterStatus('active')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'active' ? 'bg-emerald-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        Active\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFilterStatus('inactive')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'inactive' ? 'bg-red-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        Inactive\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Users Table */}\r\n            <div className=\"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl overflow-hidden shadow-xl\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead className=\"bg-slate-950/50 border-b border-slate-800 text-slate-400 text-xs font-semibold uppercase tracking-wider\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-4\">User</th>\r\n                            <th className=\"px-6 py-4\">Security Role</th>\r\n                            <th className=\"px-6 py-4\">Status</th>\r\n                            <th className=\"px-6 py-4\">Last Login</th>\r\n                            <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-slate-800\">\r\n                        <AnimatePresence>\r\n                            {filteredUsers.map((user) => (\r\n                                <motion.tr\r\n                                    key={user.id}\r\n                                    layout\r\n                                    initial={{ opacity: 0 }}\r\n                                    animate={{ opacity: 1 }}\r\n                                    exit={{ opacity: 0 }}\r\n                                    className=\"hover:bg-white/5 transition-colors group\"\r\n                                >\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-full bg-blue-500/10 border border-blue-500/20 flex items-center justify-center text-blue-500\">\r\n                                                <UserCircle className=\"w-6 h-6\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"text-sm font-semibold text-white\">{user.full_name || user.username}</div>\r\n                                                <div className=\"text-xs text-slate-500 flex items-center gap-1\">\r\n                                                    <Mail className=\"w-3 h-3\" />\r\n                                                    {user.email}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div\r\n                                            onClick={() => toggleAdminStatus(user)}\r\n                                            className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider cursor-pointer transition-all hover:scale-105 ${user.is_admin ? 'bg-purple-500/10 text-purple-400 border border-purple-500/20' : 'bg-slate-800 text-slate-400 border border-slate-700'}`}\r\n                                        >\r\n                                            <Shield className=\"w-3 h-3\" />\r\n                                            {user.is_admin ? 'Administrator' : 'General User'}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div\r\n                                            onClick={() => toggleUserStatus(user)}\r\n                                            className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider cursor-pointer transition-all hover:scale-105 ${user.is_active ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}`}\r\n                                        >\r\n                                            {user.is_active ? <CheckCircle2 className=\"w-3 h-3\" /> : <XCircle className=\"w-3 h-3\" />}\r\n                                            {user.is_active ? 'Active' : 'Disabled'}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex flex-col text-xs\">\r\n                                            <span className=\"text-slate-300 font-medium\">\r\n                                                {user.last_login ? new Date(user.last_login).toLocaleString() : 'Never'}\r\n                                            </span>\r\n                                            <span className=\"text-slate-500 flex items-center gap-1 mt-0.5\">\r\n                                                <Calendar className=\"w-3 h-3\" />\r\n                                                Joined {new Date(user.created_at).toLocaleDateString()}\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            <button\r\n                                                className=\"p-2 text-slate-400 hover:text-blue-400 hover:bg-blue-400/10 rounded-lg transition-all\"\r\n                                                onClick={() => handleOpenModal('edit', user)}\r\n                                            >\r\n                                                <Edit2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"p-2 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all\"\r\n                                                onClick={() => deleteUser(user.id)}\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </motion.tr>\r\n                            ))}\r\n                        </AnimatePresence>\r\n                        {filteredUsers.length === 0 && !isLoading && (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-12 text-center\">\r\n                                    <div className=\"flex flex-col items-center gap-2\">\r\n                                        <Search className=\"w-12 h-12 text-slate-700\" />\r\n                                        <p className=\"text-slate-500 font-medium\">No users found matching your criteria</p>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                        {isLoading && (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-12 text-center text-slate-500\">\r\n                                    Loading users...\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            <AnimatePresence>\r\n                {isModalOpen && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            className=\"bg-slate-900 border border-slate-800 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl\"\r\n                        >\r\n                            <div className=\"p-6 border-b border-slate-800 flex justify-between items-center\">\r\n                                <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                                    {modalMode === 'add' ? <UserPlus className=\"w-5 h-5 text-blue-500\" /> : <Edit2 className=\"w-5 h-5 text-blue-500\" />}\r\n                                    {modalMode === 'add' ? 'Add New User' : 'Edit User'}\r\n                                </h2>\r\n                                <button\r\n                                    onClick={() => setIsModalOpen(false)}\r\n                                    className=\"text-slate-500 hover:text-white transition-colors\"\r\n                                >\r\n                                    <XCircle className=\"w-6 h-6\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Username</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        disabled={modalMode === 'edit'}\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        value={formData.username}\r\n                                        onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n                                        placeholder=\"johndoe\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Full Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.full_name}\r\n                                        onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n                                        placeholder=\"John Doe\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Email Address</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.email}\r\n                                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                        placeholder=\"john@example.com\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">\r\n                                        {modalMode === 'add' ? 'Password' : 'New Password (Optional)'}\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        required={modalMode === 'add'}\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.password}\r\n                                        onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                                        placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between py-2\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 rounded-lg bg-purple-500/10 border border-purple-500/20 text-purple-400\">\r\n                                            <Shield className=\"w-4 h-4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"text-sm font-medium text-white\">Administrator Access</div>\r\n                                            <div className=\"text-[10px] text-slate-500 uppercase font-bold tracking-tighter\">Elevated Permissions</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setFormData({ ...formData, is_admin: !formData.is_admin })}\r\n                                        className={`w-12 h-6 rounded-full transition-all relative ${formData.is_admin ? 'bg-blue-600' : 'bg-slate-800'}`}\r\n                                    >\r\n                                        <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${formData.is_admin ? 'right-1' : 'left-1'}`} />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between py-2\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 rounded-lg bg-emerald-500/10 border border-emerald-500/20 text-emerald-400\">\r\n                                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"text-sm font-medium text-white\">Account Status</div>\r\n                                            <div className=\"text-[10px] text-slate-500 uppercase font-bold tracking-tighter\">Active / Disabled</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setFormData({ ...formData, is_active: !formData.is_active })}\r\n                                        className={`w-12 h-6 rounded-full transition-all relative ${formData.is_active ? 'bg-emerald-600' : 'bg-slate-800'}`}\r\n                                    >\r\n                                        <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${formData.is_active ? 'right-1' : 'left-1'}`} />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"pt-4 flex gap-3\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setIsModalOpen(false)}\r\n                                        className=\"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2.5 rounded-xl text-sm font-medium shadow-lg shadow-blue-500/20 transition-all active:scale-95\"\r\n                                    >\r\n                                        {modalMode === 'add' ? 'Create User' : 'Save Changes'}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\YearlyStatsView.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData, period]","fix":{"range":[1466,1474],"text":"[fetchData, period]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\skeletons\\StatCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\skeletons\\WidgetSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\config\\apiConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\config\\axiosInstance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":75,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":75,"endColumn":21}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUser'. Either include it or remove the dependency array.","line":50,"column":8,"nodeType":"ArrayExpression","endLine":50,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUser, token]","fix":{"range":[1688,1695],"text":"[fetchUser, token]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport axiosInstance from '../config/axiosInstance';\r\n\r\ninterface User {\r\n    id: number;\r\n    username: string;\r\n    email: string;\r\n    full_name: string | null;\r\n    is_admin: boolean;\r\n}\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    token: string | null;\r\n    refreshToken: string | null;\r\n    login: (token: string, refreshToken: string) => Promise<void>;\r\n    logout: () => void;\r\n    isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [token, setToken] = useState<string | null>(localStorage.getItem('statsea_token'));\r\n    const [refreshToken, setRefreshToken] = useState<string | null>(localStorage.getItem('statsea_refresh_token'));\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const fetchUser = async () => {\r\n        try {\r\n            const response = await axiosInstance.get('/auth/me');\r\n            setUser(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch user:', error);\r\n            // logout() is called by axiosInstance on 401, \r\n            // but we call it here to ensure local state is cleared too\r\n            logout();\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            fetchUser();\r\n        } else {\r\n            setIsLoading(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [token]);\r\n\r\n    const login = async (newToken: string, newRefreshToken: string) => {\r\n        localStorage.setItem('statsea_token', newToken);\r\n        localStorage.setItem('statsea_refresh_token', newRefreshToken);\r\n        setToken(newToken);\r\n        setRefreshToken(newRefreshToken);\r\n        await fetchUser();\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('statsea_token');\r\n        localStorage.removeItem('statsea_refresh_token');\r\n        setToken(null);\r\n        setRefreshToken(null);\r\n        setUser(null);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, token, refreshToken, login, logout, isLoading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":116,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":116,"endColumn":25}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'setDefaultTheme'. Either include it or remove the dependency array.","line":91,"column":8,"nodeType":"ArrayExpression","endLine":91,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [setDefaultTheme]","fix":{"range":[3282,3284],"text":"[setDefaultTheme]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { ThemeConfig, ThemeMode, accentColors, presets } from '../lib/themes';\r\n\r\n\r\ninterface ThemeContextType {\r\n    themeConfig: ThemeConfig;\r\n    setThemeConfig: (config: ThemeConfig) => void;\r\n    updateTheme: (updates: Partial<ThemeConfig>) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n    const [themeConfig, setThemeConfig] = useState<ThemeConfig>({\r\n        mode: 'dark',\r\n        accent: accentColors[0].value\r\n    });\r\n\r\n    const applyTheme = (config: ThemeConfig) => {\r\n        const root = document.documentElement;\r\n        const base = presets[config.mode];\r\n\r\n        if (!base) return;\r\n\r\n        // Apply mode class for Tailwind dark mode selector\r\n        if (config.mode === 'light') {\r\n            root.classList.remove('dark');\r\n            root.classList.add('light');\r\n        } else {\r\n            root.classList.remove('light');\r\n            root.classList.add('dark');\r\n        }\r\n\r\n        // Apply base theme variables\r\n        Object.entries(base.colors).forEach(([key, value]) => {\r\n            if (key !== '--accent' && key !== '--accent-foreground') {\r\n                root.style.setProperty(key, value);\r\n            }\r\n        });\r\n\r\n        // Apply accent color override\r\n        root.style.setProperty('--primary', config.accent);\r\n        root.style.setProperty('--ring', config.accent);\r\n        root.style.setProperty('--accent', config.accent);\r\n\r\n        // Special handling for radius if Cyberpunk\r\n        if (config.mode === 'cyberpunk') {\r\n            root.style.setProperty('--radius', '0px');\r\n        } else {\r\n            root.style.setProperty('--radius', '0.5rem');\r\n        }\r\n    };\r\n\r\n    const setDefaultTheme = () => {\r\n        const def = { mode: 'dark' as ThemeMode, accent: accentColors[0].value };\r\n        setThemeConfig(def);\r\n        applyTheme(def);\r\n        localStorage.setItem('themeConfig', JSON.stringify(def));\r\n    };\r\n\r\n    // Initial Load\r\n    useEffect(() => {\r\n        const savedThemeConfig = localStorage.getItem('themeConfig');\r\n        const legacyTheme = localStorage.getItem('theme');\r\n\r\n        if (savedThemeConfig) {\r\n            try {\r\n                const parsed = JSON.parse(savedThemeConfig);\r\n                setThemeConfig(parsed);\r\n                applyTheme(parsed);\r\n            } catch (e) {\r\n                console.error(\"Failed to parse theme config\", e);\r\n                setDefaultTheme();\r\n            }\r\n        } else if (legacyTheme) {\r\n            if (presets[legacyTheme as ThemeMode]) {\r\n                const newConfig: ThemeConfig = {\r\n                    mode: legacyTheme as ThemeMode,\r\n                    accent: presets[legacyTheme as ThemeMode].colors['--primary']\r\n                };\r\n                setThemeConfig(newConfig);\r\n                applyTheme(newConfig);\r\n                localStorage.setItem('themeConfig', JSON.stringify(newConfig));\r\n            } else {\r\n                setDefaultTheme();\r\n            }\r\n        } else {\r\n            setDefaultTheme();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const updateTheme = (updates: Partial<ThemeConfig>) => {\r\n        const newConfig = { ...themeConfig, ...updates };\r\n\r\n        if (updates.mode) {\r\n            const preset = presets[updates.mode];\r\n            // Optional: Auto-switch accent to the preset's primary color for better default look\r\n            if (preset) {\r\n                newConfig.accent = preset.colors['--primary'];\r\n            }\r\n        }\r\n\r\n        setThemeConfig(newConfig);\r\n        applyTheme(newConfig);\r\n        localStorage.setItem('themeConfig', JSON.stringify(newConfig));\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ themeConfig, setThemeConfig, updateTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useTheme() {\r\n    const context = useContext(ThemeContext);\r\n    if (context === undefined) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\contexts\\WebSocketContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":158,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":158,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState, ReactNode } from 'react';\r\nimport { toast } from 'sonner';\r\nimport { getWsUrl } from '../config/apiConfig';\r\n\r\nexport interface Notification {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    timestamp: Date;\r\n    read: boolean;\r\n    type: 'info' | 'warning' | 'error' | 'success';\r\n}\r\n\r\ninterface WebSocketContextType {\r\n    wsData: Record<string, unknown>[];\r\n    isConnected: boolean;\r\n    notifications: Notification[];\r\n    unreadCount: number;\r\n    markAsRead: (id: string) => void;\r\n    markAllAsRead: () => void;\r\n    clearNotifications: () => void;\r\n}\r\n\r\nconst WebSocketContext = createContext<WebSocketContextType | undefined>(undefined);\r\n\r\nexport const WebSocketProvider = ({ children }: { children: ReactNode }) => {\r\n    const [wsData, setWsData] = useState<Record<string, unknown>[]>([]);\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [notifications, setNotifications] = useState<Notification[]>([]);\r\n\r\n    const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n    const markAsRead = (id: string) => {\r\n        setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n));\r\n    };\r\n\r\n    const markAllAsRead = () => {\r\n        setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n    };\r\n\r\n    const clearNotifications = () => {\r\n        setNotifications([]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        let ws: WebSocket | null = null;\r\n        let eventWs: WebSocket | null = null;\r\n        let reconnectTimeout: NodeJS.Timeout;\r\n        let isMounted = true;\r\n\r\n        const connect = () => {\r\n            const wsUrl = getWsUrl('/ws/live');\r\n            const eventWsUrl = getWsUrl('/ws/events');\r\n\r\n            ws = new WebSocket(wsUrl);\r\n            eventWs = new WebSocket(eventWsUrl);\r\n\r\n            ws.onopen = () => {\r\n                if (isMounted) {\r\n                    setIsConnected(true);\r\n                    toast.success('Connected to Live Server');\r\n                }\r\n            };\r\n\r\n            ws.onclose = () => {\r\n                if (isMounted) {\r\n                    setIsConnected(false);\r\n                    // Reconnect after 3 seconds\r\n                    reconnectTimeout = setTimeout(connect, 3000);\r\n                }\r\n            };\r\n\r\n            let lastUpdate = 0;\r\n            const THROTTLE_MS = 500; // Max 2 updates per second\r\n\r\n            ws.onmessage = (event) => {\r\n                const now = Date.now();\r\n                if (now - lastUpdate < THROTTLE_MS) return;\r\n                lastUpdate = now;\r\n\r\n                try {\r\n                    const data = JSON.parse(event.data);\r\n                    setWsData(prev => {\r\n                        const newData = [...prev, {\r\n                            time: new Date(data.timestamp * 1000).toLocaleTimeString(),\r\n                            upload: data.u / 1024,\r\n                            download: data.d / 1024,\r\n                        }];\r\n                        if (newData.length > 20) newData.shift();\r\n                        return newData;\r\n                    });\r\n                } catch (e) {\r\n                    console.error(\"Failed to parse WS message\", e);\r\n                }\r\n            };\r\n\r\n            eventWs.onmessage = (event) => {\r\n                try {\r\n                    const data = JSON.parse(event.data);\r\n\r\n                    // Add to notifications list\r\n                    const newNotification: Notification = {\r\n                        id: Math.random().toString(36).substr(2, 9),\r\n                        title: data.title || 'New Event',\r\n                        description: data.description || '',\r\n                        timestamp: new Date(),\r\n                        read: false,\r\n                        type: data.type === 'error' ? 'error' :\r\n                            data.type === 'warning' ? 'warning' :\r\n                                data.type === 'success' ? 'success' : 'info'\r\n                    };\r\n\r\n                    setNotifications(prev => [newNotification, ...prev]);\r\n\r\n                    // Show toast for high priority events or new devices\r\n                    if (data.type === 'NEW_DEVICE' || data.type === 'security_alert') {\r\n                        toast.warning(data.title, {\r\n                            description: data.description,\r\n                            duration: 5000,\r\n                        });\r\n                    } else {\r\n                        toast.info(data.title, {\r\n                            description: data.description,\r\n                        });\r\n                    }\r\n\r\n                } catch (e) {\r\n                    console.error(\"Failed to parse event message\", e);\r\n                }\r\n            };\r\n        };\r\n\r\n        connect();\r\n\r\n        return () => {\r\n            isMounted = false;\r\n            if (ws) ws.close();\r\n            if (eventWs) eventWs.close();\r\n            clearTimeout(reconnectTimeout);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <WebSocketContext.Provider value={{\r\n            wsData,\r\n            isConnected,\r\n            notifications,\r\n            unreadCount,\r\n            markAsRead,\r\n            markAllAsRead,\r\n            clearNotifications\r\n        }}>\r\n            {children}\r\n        </WebSocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useWebSocket = () => {\r\n    const context = useContext(WebSocketContext);\r\n    if (context === undefined) {\r\n        throw new Error('useWebSocket must be used within a WebSocketProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\lib\\themes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\services\\SpeedtestService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]

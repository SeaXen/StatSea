[{"filePath":"D:\\Gravity\\StatSea\\frontend\\.eslintrc.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\App.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ActiveConnectionsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\AnalyticsDashboard.tsx","messages":[{"ruleId":"no-redeclare","severity":2,"message":"'DashboardConfig' is already defined.","line":214,"column":11,"nodeType":"Identifier","messageId":"redeclared","endLine":214,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport DnsQueryLog from './DnsQueryLog';\r\nimport NetworkComparison from './NetworkComparison';\r\nimport {\r\n    AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\r\n    LineChart, Line, BarChart, Bar, PieChart, Pie, Cell\r\n} from 'recharts';\r\nimport {\r\n    Shield, AlertTriangle, Activity, Zap, Pause, Play, Search, Globe, Wifi, Server,\r\n    Database, Radio, Layers, BarChart3, TrendingUp, Monitor, Network, Settings,\r\n    Flag\r\n} from 'lucide-react';\r\nimport { API_CONFIG } from '../config/apiConfig';\r\nimport axiosInstance from '../config/axiosInstance';\r\nimport PredictionWidget from './PredictionWidget';\r\nimport YearlyStatsView from './YearlyStatsView';\r\n\r\n\r\n// ÔöÇÔöÇÔöÇ Protocol Color Map ÔöÇÔöÇÔöÇ\r\nconst PROTO_COLORS: Record<string, string> = {\r\n    TCP: '#22d3ee',\r\n    UDP: '#34d399',\r\n    HTTP: '#f97316',\r\n    HTTPS: '#3b82f6',\r\n    DNS: '#eab308',\r\n    ICMP: '#a855f7',\r\n    SSH: '#14b8a6',\r\n    FTP: '#f43f5e',\r\n    OTHER: '#6b7280'\r\n};\r\n\r\nconst SIZE_COLORS: Record<string, string> = {\r\n    \"tiny (<128B)\": '#22d3ee',\r\n    \"small (128-512B)\": '#34d399',\r\n    \"medium (512-1024B)\": '#f59e0b',\r\n    \"large (1024B+)\": '#f43f5e'\r\n};\r\n\r\n// ÔöÇÔöÇÔöÇ Interfaces ÔöÇÔöÇÔöÇ\r\ninterface AnalyticsData {\r\n    total_packets: number;\r\n    total_bytes: number;\r\n    packets_per_sec: number;\r\n    suspicious: number;\r\n    upload_rate: number;\r\n    download_rate: number;\r\n    protocols: Record<string, number>;\r\n    top_devices: Array<{\r\n        mac: string;\r\n        ip: string;\r\n        hostname?: string;\r\n        upload: number;\r\n        download: number;\r\n        total: number;\r\n    }>;\r\n    packet_log: Array<{\r\n        time: string;\r\n        proto: string;\r\n        src: string;\r\n        dst: string;\r\n        size: number;\r\n        flags?: string;\r\n        suspicious?: boolean;\r\n    }>;\r\n    active_device_count: number;\r\n    // Extended\r\n    bandwidth_history: Array<{ time: string; up: number; down: number }>;\r\n    packet_size_distribution: Record<string, number>;\r\n    dns_queries: number;\r\n    http_requests: number;\r\n    active_sessions: number;\r\n    connection_types: Record<string, number>;\r\n    bytes_per_protocol: Record<string, number>;\r\n}\r\n\r\ninterface BandwidthPoint {\r\n    timestamp: string;\r\n    upload_bytes: number;\r\n    download_bytes: number;\r\n}\r\n\r\ninterface LatencyPoint {\r\n    timestamp: string;\r\n    target: string;\r\n    latency_ms: number;\r\n}\r\n\r\ninterface SecurityEvent {\r\n    id: number;\r\n    timestamp: string;\r\n    event_type: string;\r\n    severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\r\n    description: string;\r\n    source_ip: string;\r\n    resolved: boolean;\r\n}\r\n\r\ninterface ExternalConnection {\r\n    ip: string;\r\n    bytes: number;\r\n    hits: number;\r\n    city: string;\r\n    country: string;\r\n}\r\n\r\n\r\ninterface DashboardConfig {\r\n    showStatsRow: boolean;\r\n    showLiveBandwidth: boolean;\r\n    showGauges: boolean;\r\n    showProtocolFilters: boolean;\r\n    showProtocolCharts: boolean;\r\n    showPacketCharts: boolean;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Helper ÔöÇÔöÇÔöÇ\r\nfunction formatBytes(bytes: number): string {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\r\n}\r\n\r\nfunction formatNumber(num: number): string {\r\n    if (num >= 1_000_000) return `${(num / 1_000_000).toFixed(1)}M`;\r\n    if (num >= 1_000) return `${(num / 1_000).toFixed(1)}K`;\r\n    return num.toLocaleString();\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Stat Card ÔöÇÔöÇÔöÇ\r\nconst StatCard = ({ label, value, icon: Icon, color, sub, trend }: {\r\n    label: string; value: string | number; icon: React.ElementType; color: string; sub?: string; trend?: 'up' | 'down' | 'neutral';\r\n}) => (\r\n    <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 flex flex-col gap-0.5 relative overflow-hidden group hover:border-gray-700 transition-all duration-300 hover:shadow-lg\" style={{ '--glow': color } as React.CSSProperties}>\r\n        <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-[10px] font-medium text-gray-500 uppercase tracking-wider\">{label}</span>\r\n            <div className=\"w-7 h-7 rounded-lg flex items-center justify-center transition-transform group-hover:scale-110\" style={{ background: `${color}15` }}>\r\n                <Icon className=\"h-3.5 w-3.5\" style={{ color }} />\r\n            </div>\r\n        </div>\r\n        <span className=\"text-xl font-bold text-white font-mono leading-tight\">{value}</span>\r\n        {sub && (\r\n            <div className=\"flex items-center gap-1\">\r\n                {trend === 'up' && <TrendingUp className=\"w-2.5 h-2.5 text-emerald-400\" />}\r\n                {trend === 'down' && <TrendingUp className=\"w-2.5 h-2.5 text-red-400 rotate-180\" />}\r\n                <span className=\"text-[10px] text-gray-500 truncate\">{sub}</span>\r\n            </div>\r\n        )}\r\n        <div className=\"absolute bottom-0 left-0 h-[1.5px] w-full opacity-30 group-hover:opacity-50 transition-opacity\" style={{ background: `linear-gradient(90deg, ${color}, transparent)` }} />\r\n    </div>\r\n);\r\n\r\n\r\n\r\n// ÔöÇÔöÇÔöÇ Circular Gauge ÔöÇÔöÇÔöÇ\r\nconst CircularGauge = ({ percentage, rate, label, color, dotColor }: {\r\n    percentage: number; rate: string; label: string; color: string; dotColor: string;\r\n}) => {\r\n    const radius = 40;\r\n    const circumference = 2 * Math.PI * radius;\r\n    const offset = circumference - (Math.min(percentage, 100) / 100) * circumference;\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-1\">\r\n            <div className=\"relative w-24 h-24\">\r\n                <svg className=\"w-full h-full -rotate-90\" viewBox=\"0 0 100 100\">\r\n                    <circle cx=\"50\" cy=\"50\" r={radius} stroke=\"#1f2937\" strokeWidth=\"6\" fill=\"none\" />\r\n                    <circle\r\n                        cx=\"50\" cy=\"50\" r={radius} stroke={color} strokeWidth=\"6\" fill=\"none\"\r\n                        strokeDasharray={circumference} strokeDashoffset={offset}\r\n                        strokeLinecap=\"round\" className=\"transition-all duration-700\"\r\n                    />\r\n                </svg>\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\r\n                    <div className=\"w-2 h-2 rounded-full mb-1\" style={{ background: dotColor }} />\r\n                    <span className=\"text-lg font-bold text-white\">{percentage}%</span>\r\n                    <span className=\"text-[10px] text-gray-400\">{rate}</span>\r\n                </div>\r\n            </div>\r\n            <span className=\"text-xs text-gray-500\">{label}</span>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔöÇÔöÇÔöÇ Protocol Badge ÔöÇÔöÇÔöÇ\r\nconst ProtocolBadge = ({ proto, active, onClick }: { proto: string; active: boolean; onClick: () => void }) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 border ${active\r\n            ? 'scale-105 shadow-lg'\r\n            : 'opacity-40 hover:opacity-70 border-transparent'\r\n            }`}\r\n        style={{\r\n            color: PROTO_COLORS[proto] || '#9ca3af',\r\n            borderColor: active ? (PROTO_COLORS[proto] || '#9ca3af') : 'transparent',\r\n            background: active ? `${PROTO_COLORS[proto]}15` : 'transparent'\r\n        }}\r\n    >\r\n        {proto}\r\n    </button>\r\n);\r\n\r\n\r\ninterface PacketLog {\r\n    time: string;\r\n    proto: string;\r\n    src: string;\r\n    dst: string;\r\n    size: number;\r\n    flags?: string;\r\n    suspicious?: boolean;\r\n}\r\n\r\ninterface DashboardConfig {\r\n    showStatsRow: boolean;\r\n    showLiveBandwidth: boolean;\r\n    showGauges: boolean;\r\n    showProtocolFilters: boolean;\r\n    showProtocolCharts: boolean;\r\n    showPacketCharts: boolean;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ MAIN COMPONENT ÔöÇÔöÇÔöÇ\r\nconst AnalyticsDashboard = () => {\r\n    const [activeView, setActiveView] = useState<'live' | 'statistics' | 'connections' | 'security' | 'history' | 'dns' | 'comparison'>('live');\r\n    const [analyticsData, setAnalyticsData] = useState<AnalyticsData | null>(null);\r\n    const [bandwidthData, setBandwidthData] = useState<BandwidthPoint[]>([]);\r\n    const [latencyData, setLatencyData] = useState<LatencyPoint[]>([]);\r\n    const [securityEvents, setSecurityEvents] = useState<SecurityEvent[]>([]);\r\n    const [externalConnections, setExternalConnections] = useState<ExternalConnection[]>([]);\r\n    const [packetLogs, setPacketLogs] = useState<PacketLog[]>([]); // New state for packet logs\r\n    const [flagFilter, setFlagFilter] = useState(''); // New state for flag filter\r\n    const [loading, setLoading] = useState(true);\r\n    const [paused, setPaused] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [activeProtocols, setActiveProtocols] = useState<Set<string>>(new Set(['TCP', 'UDP', 'HTTP', 'HTTPS', 'DNS', 'ICMP', 'SSH', 'FTP']));\r\n    const [showSettings, setShowSettings] = useState(false);\r\n    const [dashboardConfig, setDashboardConfig] = useState<DashboardConfig>(() => {\r\n        const saved = localStorage.getItem('dashboardConfig');\r\n        return saved ? JSON.parse(saved) : {\r\n            showStatsRow: true,\r\n            showLiveBandwidth: true,\r\n            showGauges: true,\r\n            showProtocolFilters: true,\r\n            showProtocolCharts: true,\r\n            showPacketCharts: true\r\n        };\r\n    });\r\n\r\n    const logRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('dashboardConfig', JSON.stringify(dashboardConfig));\r\n    }, [dashboardConfig]);\r\n\r\n    const toggleProtocol = (proto: string) => {\r\n        setActiveProtocols(prev => {\r\n            const next = new Set(prev);\r\n            if (next.has(proto)) next.delete(proto);\r\n            else next.add(proto);\r\n            return next;\r\n        });\r\n    };\r\n\r\n    const toggleWidget = (key: keyof DashboardConfig) => {\r\n        setDashboardConfig(prev => ({ ...prev, [key]: !prev[key] }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Load from cache initially\r\n        const cachedAnalytics = localStorage.getItem('statsea_cache_analytics');\r\n        const cachedBandwidth = localStorage.getItem('statsea_cache_bandwidth');\r\n        const cachedSecurity = localStorage.getItem('statsea_cache_security');\r\n        const cachedExternal = localStorage.getItem('statsea_cache_external');\r\n\r\n        if (cachedAnalytics) setAnalyticsData(JSON.parse(cachedAnalytics));\r\n        if (cachedBandwidth) setBandwidthData(JSON.parse(cachedBandwidth));\r\n        if (cachedSecurity) setSecurityEvents(JSON.parse(cachedSecurity));\r\n        if (cachedExternal) setExternalConnections(JSON.parse(cachedExternal));\r\n\r\n        const fetchData = async () => {\r\n            if (paused) return;\r\n            try {\r\n                const [analyticsRes, netRes, secRes, connRes] = await Promise.all([\r\n                    axiosInstance.get(API_CONFIG.ENDPOINTS.ANALYTICS.SUMMARY),\r\n                    axiosInstance.get(API_CONFIG.ENDPOINTS.ANALYTICS.HISTORY),\r\n                    axiosInstance.get(API_CONFIG.ENDPOINTS.SECURITY.EVENTS),\r\n                    axiosInstance.get(API_CONFIG.ENDPOINTS.NETWORK.CONNECTIONS)\r\n                ]);\r\n\r\n                setAnalyticsData(analyticsRes.data);\r\n\r\n                const netData = netRes.data;\r\n                const formattedBandwidth = netData.bandwidth.map((i: BandwidthPoint) => ({\r\n                    ...i, timestamp: new Date(i.timestamp).toLocaleTimeString()\r\n                })).reverse();\r\n\r\n                setBandwidthData(formattedBandwidth);\r\n                setLatencyData(netData.latency.map((i: LatencyPoint) => ({\r\n                    ...i, timestamp: new Date(i.timestamp).toLocaleTimeString()\r\n                })).reverse());\r\n\r\n                setSecurityEvents(secRes.data);\r\n                setExternalConnections(connRes.data);\r\n\r\n                // Update cache\r\n                localStorage.setItem('statsea_cache_analytics', JSON.stringify(analyticsRes.data));\r\n                localStorage.setItem('statsea_cache_bandwidth', JSON.stringify(formattedBandwidth));\r\n                localStorage.setItem('statsea_cache_security', JSON.stringify(secRes.data));\r\n                localStorage.setItem('statsea_cache_external', JSON.stringify(connRes.data));\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch analytics data\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n        const interval = setInterval(fetchData, 2000);\r\n        return () => clearInterval(interval);\r\n    }, [paused]);\r\n\r\n    // Fetch packet logs separately for live view\r\n    useEffect(() => {\r\n        if (activeView !== 'live' || paused) return;\r\n\r\n        const fetchPacketLogs = async () => {\r\n            try {\r\n                const params = new URLSearchParams();\r\n                params.append('limit', '100');\r\n\r\n                if (searchQuery) {\r\n                    const q = searchQuery.trim();\r\n                    if (/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/.test(q)) {\r\n                        params.append('ip', q);\r\n                    } else if (/^\\d+$/.test(q)) {\r\n                        params.append('port', q);\r\n                    } else {\r\n                        params.append('protocol', q);\r\n                    }\r\n                }\r\n\r\n                if (flagFilter) {\r\n                    params.append('flags', flagFilter);\r\n                }\r\n\r\n                const res = await axiosInstance.get(API_CONFIG.ENDPOINTS.ANALYTICS.PACKETS, { params });\r\n                setPacketLogs(res.data);\r\n            } catch (error) {\r\n                console.error(\"Error fetching packet logs:\", error);\r\n            }\r\n        };\r\n\r\n        fetchPacketLogs();\r\n        const interval = setInterval(fetchPacketLogs, 1000);\r\n        return () => clearInterval(interval);\r\n    }, [activeView, paused, searchQuery, flagFilter]);\r\n\r\n\r\n    // Auto-scroll live stream\r\n    useEffect(() => {\r\n        if (logRef.current && activeView === 'live' && !paused) {\r\n            logRef.current.scrollTop = logRef.current.scrollHeight;\r\n        }\r\n    }, [analyticsData?.packet_log, activeView, paused]);\r\n\r\n    if (loading && !analyticsData) return (\r\n        <div className=\"h-[60vh] flex flex-col items-center justify-center text-gray-500 gap-4\">\r\n            <Activity className=\"w-8 h-8 animate-pulse text-cyan-500\" />\r\n            <span>Initializing Traffic Analyzer...</span>\r\n        </div>\r\n    );\r\n\r\n    if (!analyticsData) return (\r\n        <div className=\"h-[60vh] flex flex-col items-center justify-center text-gray-500 gap-4\">\r\n            <AlertTriangle className=\"w-10 h-10 text-amber-500\" />\r\n            <h3 className=\"text-xl font-semibold text-white\">Backend Unavailable</h3>\r\n            <p className=\"max-w-md text-center text-gray-400\">\r\n                Could not connect to the analysis engine. Please ensure the backend server is running.\r\n            </p>\r\n            <button\r\n                onClick={() => window.location.reload()}\r\n                className=\"mt-4 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors border border-gray-700\"\r\n            >\r\n                Retry Connection\r\n            </button>\r\n        </div>\r\n    );\r\n\r\n    const totalTraffic = analyticsData.upload_rate + analyticsData.download_rate;\r\n    const downPct = totalTraffic > 0 ? Math.round((analyticsData.download_rate / totalTraffic) * 100) : 0;\r\n    const upPct = totalTraffic > 0 ? Math.round((analyticsData.upload_rate / totalTraffic) * 100) : 0;\r\n\r\n    // Protocol data for pie chart\r\n    const protocolChartData = Object.entries(analyticsData.protocols).map(([name, value]) => ({\r\n        name, value, color: PROTO_COLORS[name] || '#6b7280'\r\n    }));\r\n\r\n    // Packet size distribution for bar chart\r\n    const sizeDistData = Object.entries(analyticsData.packet_size_distribution || {}).map(([name, value]) => ({\r\n        name: name.replace(/[()]/g, '').replace('<', '<').replace('>', '>'),\r\n        shortName: name.split(' ')[0],\r\n        value,\r\n        color: SIZE_COLORS[name] || '#6b7280'\r\n    }));\r\n\r\n    // Bytes per protocol for bar chart\r\n    const bytesPerProtoData = Object.entries(analyticsData.bytes_per_protocol || {})\r\n        .map(([name, value]) => ({ name, value, color: PROTO_COLORS[name] || '#6b7280' }))\r\n        .sort((a, b) => b.value - a.value);\r\n\r\n    // Connection types for mini pie\r\n    const connTypeData = Object.entries(analyticsData.connection_types || {}).map(([name, value]) => ({\r\n        name: name.charAt(0).toUpperCase() + name.slice(1),\r\n        value,\r\n        color: name === 'external' ? '#3b82f6' : '#34d399'\r\n    }));\r\n\r\n    // Filtered packet log\r\n    const sourceLogs = (activeView === 'live' && packetLogs.length > 0) ? packetLogs : (analyticsData.packet_log || []);\r\n    const filteredLog = sourceLogs.filter(pkt => {\r\n        if (!activeProtocols.has(pkt.proto)) return false;\r\n        if (searchQuery) {\r\n            const q = searchQuery.toLowerCase();\r\n            if (!(pkt.src.toLowerCase().includes(q) || pkt.dst.toLowerCase().includes(q) || pkt.proto.toLowerCase().includes(q))) return false;\r\n        }\r\n        if (flagFilter) {\r\n            const f = flagFilter.toUpperCase();\r\n            if (!pkt.flags || !pkt.flags.includes(f)) return false;\r\n        }\r\n        return true;\r\n    });\r\n\r\n    const allProtocols = ['TCP', 'UDP', 'HTTP', 'HTTPS', 'DNS', 'ICMP', 'SSH', 'FTP'];\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* ÔöÇÔöÇÔöÇ Header ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white tracking-tight flex items-center gap-3\">\r\n                        <Activity className=\"w-7 h-7 text-cyan-400\" />\r\n                        Traffic Analyzer\r\n                    </h1>\r\n                    <p className=\"text-gray-400 mt-0.5 text-xs\">Real-time packet monitoring and deep analysis</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-900/60 border border-gray-800 rounded-lg\">\r\n                        <div className={`w-2 h-2 rounded-full ${paused ? 'bg-amber-400' : 'bg-emerald-400 animate-pulse'}`} />\r\n                        <span className=\"text-xs text-gray-400\">{paused ? 'Paused' : 'Capturing'}</span>\r\n                    </div>\r\n                    <button onClick={() => setPaused(!paused)}\r\n                        className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${paused\r\n                            ? 'bg-green-500/10 text-green-400 border border-green-500/30 hover:bg-green-500/20'\r\n                            : 'bg-amber-500/10 text-amber-400 border border-amber-500/30 hover:bg-amber-500/20'\r\n                            }`}>\r\n                        {paused ? <><Play className=\"w-3.5 h-3.5\" /> Resume</> : <><Pause className=\"w-3.5 h-3.5\" /> Pause</>}\r\n                    </button>\r\n                    <div className=\"relative\">\r\n                        <button\r\n                            onClick={() => setShowSettings(!showSettings)}\r\n                            className={`p-2 rounded-lg transition-colors border ${showSettings ? 'bg-gray-800 border-gray-600 text-cyan-400' : 'bg-gray-900/60 border-gray-800 text-gray-400 hover:text-white'}`}\r\n                        >\r\n                            <Settings className=\"w-4 h-4\" />\r\n                        </button>\r\n\r\n                        {/* Settings Dropdown */}\r\n                        {showSettings && (\r\n                            <div className=\"absolute right-0 top-full mt-2 w-56 bg-gray-900 border border-gray-700 rounded-xl shadow-xl z-50 p-3 animate-in fade-in slide-in-from-top-2\">\r\n                                <h4 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-1\">Dashboard Layout</h4>\r\n                                <div className=\"space-y-1\">\r\n                                    {[\r\n                                        { key: 'showStatsRow', label: 'Key Statistics' },\r\n                                        { key: 'showLiveBandwidth', label: 'Live Bandwidth Graph' },\r\n                                        { key: 'showGauges', label: 'Network Gauges' },\r\n                                        { key: 'showProtocolFilters', label: 'Protocol Filters' },\r\n                                        { key: 'showProtocolCharts', label: 'Protocol Distribution' },\r\n                                        { key: 'showPacketCharts', label: 'Packet Size/Volume' },\r\n\r\n                                    ].map(item => (\r\n                                        <button\r\n                                            key={item.key}\r\n                                            onClick={() => toggleWidget(item.key as keyof DashboardConfig)}\r\n                                            className=\"w-full flex items-center justify-between px-2 py-1.5 hover:bg-gray-800 rounded-lg text-xs text-gray-300 transition-colors\"\r\n                                        >\r\n                                            <span>{item.label}</span>\r\n                                            <div className={`w-8 h-4 rounded-full relative transition-colors ${dashboardConfig[item.key as keyof DashboardConfig] ? 'bg-cyan-500/20' : 'bg-gray-700'}`}>\r\n                                                <div className={`absolute top-0.5 w-3 h-3 rounded-full transition-all ${dashboardConfig[item.key as keyof DashboardConfig] ? 'left-4.5 bg-cyan-400' : 'left-0.5 bg-gray-500'}`} style={{ left: dashboardConfig[item.key as keyof DashboardConfig] ? '18px' : '2px' }} />\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Predictions & Anomalies */}\r\n            <PredictionWidget />\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Stats Row (8 cards) ÔöÇÔöÇÔöÇ */}\r\n            {dashboardConfig.showStatsRow && (\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3\">\r\n                    <StatCard label=\"Packets\" value={formatNumber(analyticsData.total_packets)} icon={Zap} color=\"#22d3ee\" sub=\"total captured\" />\r\n                    <StatCard label=\"Data\" value={formatBytes(analyticsData.total_bytes)} icon={Database} color=\"#34d399\" sub=\"transferred\" />\r\n                    <StatCard label=\"PPS\" value={`${analyticsData.packets_per_sec}`} icon={Activity} color=\"#a855f7\" sub=\"packets/sec\" trend=\"up\" />\r\n                    <StatCard label=\"Suspicious\" value={analyticsData.suspicious} icon={AlertTriangle} color={analyticsData.suspicious > 0 ? '#f43f5e' : '#6b7280'} sub=\"flagged\" trend={analyticsData.suspicious > 0 ? 'up' : 'neutral'} />\r\n                    <StatCard label=\"DNS\" value={formatNumber(analyticsData.dns_queries)} icon={Globe} color=\"#eab308\" sub=\"queries\" />\r\n                    <StatCard label=\"HTTP\" value={formatNumber(analyticsData.http_requests)} icon={Network} color=\"#f97316\" sub=\"requests\" />\r\n                    <StatCard label=\"Sessions\" value={analyticsData.active_sessions} icon={Radio} color=\"#14b8a6\" sub=\"active\" trend=\"up\" />\r\n                    <StatCard label=\"Devices\" value={analyticsData.active_device_count} icon={Monitor} color=\"#8b5cf6\" sub=\"online\" />\r\n                </div>\r\n            )}\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Live Bandwidth Timeline + Gauges + Protocol Filters ÔöÇÔöÇÔöÇ */}\r\n            <div className={`grid grid-cols-1 ${dashboardConfig.showLiveBandwidth && dashboardConfig.showGauges && dashboardConfig.showProtocolFilters ? 'lg:grid-cols-3' : 'lg:grid-cols-2'} gap-4`}>\r\n                {/* Live Bandwidth Timeline */}\r\n                {dashboardConfig.showLiveBandwidth && (\r\n                    <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                        <h3 className=\"text-xs font-medium text-gray-400 mb-2 flex items-center gap-2\">\r\n                            <TrendingUp className=\"w-3.5 h-3.5 text-cyan-400\" /> Live Bandwidth\r\n                        </h3>\r\n                        <div className=\"h-[100px]\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <AreaChart data={analyticsData.bandwidth_history || []}>\r\n                                    <defs>\r\n                                        <linearGradient id=\"liveDown\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                            <stop offset=\"5%\" stopColor=\"#22d3ee\" stopOpacity={0.3} />\r\n                                            <stop offset=\"95%\" stopColor=\"#22d3ee\" stopOpacity={0} />\r\n                                        </linearGradient>\r\n                                        <linearGradient id=\"liveUp\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                            <stop offset=\"5%\" stopColor=\"#34d399\" stopOpacity={0.3} />\r\n                                            <stop offset=\"95%\" stopColor=\"#34d399\" stopOpacity={0} />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                    <XAxis dataKey=\"time\" stroke=\"#374151\" fontSize={9} tickCount={4} />\r\n                                    <YAxis stroke=\"#374151\" fontSize={9} tickFormatter={(v: number) => formatBytes(v)} width={50} />\r\n                                    <Tooltip\r\n                                        contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px', fontSize: '11px' }}\r\n                                        itemStyle={{ color: '#e5e7eb' }}\r\n                                        formatter={(value: number) => formatBytes(value)}\r\n                                    />\r\n                                    <Area type=\"monotone\" dataKey=\"down\" stroke=\"#22d3ee\" strokeWidth={1.5} fill=\"url(#liveDown)\" dot={false} name=\"Download\" />\r\n                                    <Area type=\"monotone\" dataKey=\"up\" stroke=\"#34d399\" strokeWidth={1.5} fill=\"url(#liveUp)\" dot={false} name=\"Upload\" />\r\n                                </AreaChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Gauges */}\r\n                {dashboardConfig.showGauges && (\r\n                    <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4 flex items-center justify-center gap-6\">\r\n                        <CircularGauge percentage={downPct} rate={formatBytes(analyticsData.download_rate) + '/s'} label=\"Download\" color=\"#22d3ee\" dotColor=\"#22d3ee\" />\r\n                        <CircularGauge percentage={upPct} rate={formatBytes(analyticsData.upload_rate) + '/s'} label=\"Upload\" color=\"#34d399\" dotColor=\"#34d399\" />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Protocol Filters */}\r\n                {dashboardConfig.showProtocolFilters && (\r\n                    <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                        <h3 className=\"text-xs font-medium text-gray-400 mb-2\">Protocol Filters</h3>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {allProtocols.map(p => (\r\n                                <ProtocolBadge key={p} proto={p} active={activeProtocols.has(p)} onClick={() => toggleProtocol(p)} />\r\n                            ))}\r\n                        </div>\r\n                        {/* Connection Types mini */}\r\n                        <div className=\"mt-4 pt-3 border-t border-gray-800\">\r\n                            <h4 className=\"text-xs text-gray-500 mb-2\">Connection Types</h4>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                {connTypeData.map(ct => (\r\n                                    <div key={ct.name} className=\"flex items-center gap-1.5\">\r\n                                        <div className=\"w-2 h-2 rounded-full\" style={{ background: ct.color }} />\r\n                                        <span className=\"text-xs text-gray-400\">{ct.name}</span>\r\n                                        <span className=\"text-xs font-mono text-gray-500\">{formatNumber(ct.value)}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Tab Navigation ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"flex gap-1 border-b border-gray-800\">\r\n                {(['live', 'statistics', 'connections', 'security', 'history', 'dns', 'comparison'] as const).map(tab => (\r\n                    <button key={tab} onClick={() => setActiveView(tab)}\r\n                        className={`px-4 py-2 text-xs font-medium capitalize transition-all rounded-t-lg ${activeView === tab\r\n                            ? 'text-cyan-400 bg-gray-900/60 border border-gray-800 border-b-transparent -mb-px'\r\n                            : 'text-gray-500 hover:text-gray-300'\r\n                            }`}>\r\n                        {tab === 'live' ? 'Live Stream' : tab}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ LIVE STREAM ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'live' && (\r\n                <div className=\"space-y-4\">\r\n                    {/* Search and Filters */}\r\n                    <div className=\"flex gap-2\">\r\n                        <div className=\"relative flex-1\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search by IP, port, or protocol...\"\r\n                                value={searchQuery}\r\n                                onChange={e => setSearchQuery(e.target.value)}\r\n                                className=\"w-full bg-gray-900/60 border border-gray-800 rounded-lg pl-9 pr-4 py-2 text-xs text-gray-300 placeholder-gray-600 focus:outline-none focus:border-cyan-500/50 transition-colors\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"relative w-48\">\r\n                            <Flag className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Filter Flags (e.g. syn)\"\r\n                                value={flagFilter}\r\n                                onChange={e => setFlagFilter(e.target.value)}\r\n                                className=\"w-full bg-gray-900/60 border border-gray-800 rounded-lg pl-9 pr-4 py-2 text-xs text-gray-300 placeholder-gray-600 focus:outline-none focus:border-cyan-500/50 transition-colors\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Live Packet Table */}\r\n                    <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl overflow-hidden\">\r\n                        <div ref={logRef} className=\"h-[400px] overflow-y-auto custom-scrollbar\">\r\n                            <table className=\"w-full text-sm\">\r\n                                <thead className=\"sticky top-0 bg-gray-900/95 border-b border-gray-800 z-10\">\r\n                                    <tr>\r\n                                        <th className=\"text-left text-gray-500 font-medium px-3 py-2 text-[10px]\">TIME</th>\r\n                                        <th className=\"text-left text-gray-500 font-medium px-3 py-2 text-[10px]\">PROTO</th>\r\n                                        <th className=\"text-left text-gray-500 font-medium px-3 py-2 text-[10px]\">FLAGS</th>\r\n                                        <th className=\"text-left text-gray-500 font-medium px-3 py-2 text-[10px]\">SOURCE</th>\r\n                                        <th className=\"text-center text-gray-500 font-medium px-1 py-2 text-[10px]\"></th>\r\n                                        <th className=\"text-left text-gray-500 font-medium px-3 py-2 text-[10px]\">DESTINATION</th>\r\n                                        <th className=\"text-right text-gray-500 font-medium px-3 py-2 text-[10px]\">SIZE</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {filteredLog.length === 0 ? (\r\n                                        <tr><td colSpan={7} className=\"text-center text-gray-600 py-12\">No packets matching filters</td></tr>\r\n                                    ) : (\r\n                                        filteredLog.map((pkt, i) => (\r\n                                            <tr key={i} className={`border-b border-gray-800/30 hover:bg-gray-800/30 transition-colors ${pkt.suspicious ? 'bg-red-500/5' : ''}`}>\r\n                                                <td className=\"px-3 py-1.5 font-mono text-gray-500 text-[10px]\">{pkt.time}</td>\r\n                                                <td className=\"px-3 py-1.5\">\r\n                                                    <span className=\"px-1.5 py-0.5 rounded text-[9px] font-bold\" style={{\r\n                                                        color: PROTO_COLORS[pkt.proto] || '#9ca3af',\r\n                                                        background: `${PROTO_COLORS[pkt.proto] || '#6b7280'}20`\r\n                                                    }}>\r\n                                                        {pkt.proto}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"px-3 py-1.5 font-mono text-gray-400 text-[10px]\">\r\n                                                    {pkt.flags && pkt.flags !== 'None' ? (\r\n                                                        <span className=\"text-xs text-cyan-600\">{pkt.flags}</span>\r\n                                                    ) : (\r\n                                                        <span className=\"text-gray-800\">-</span>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td className=\"px-3 py-1.5 font-mono text-gray-300 text-[10px]\">{pkt.src}</td>\r\n                                                <td className=\"px-1 py-1.5 text-gray-600 text-center text-[10px]\">ÔåÆ</td>\r\n                                                <td className=\"px-3 py-1.5 font-mono text-gray-300 text-[10px]\">{pkt.dst}</td>\r\n                                                <td className=\"px-3 py-1.5 font-mono text-gray-400 text-[10px] text-right\">{pkt.size} B</td>\r\n                                            </tr>\r\n                                        ))\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ STATISTICS ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'statistics' && (\r\n                <div className=\"space-y-6\">\r\n                    {/* Row 1: Bandwidth + Latency */}\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                        {/* Bandwidth Chart */}\r\n                        <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                            <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                <Activity className=\"w-4 h-4 text-emerald-400\" /> Bandwidth Usage\r\n                            </h3>\r\n                            <div className=\"h-[250px]\">\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <AreaChart data={bandwidthData}>\r\n                                        <defs>\r\n                                            <linearGradient id=\"colorDown2\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                                <stop offset=\"5%\" stopColor=\"#22d3ee\" stopOpacity={0.4} />\r\n                                                <stop offset=\"95%\" stopColor=\"#22d3ee\" stopOpacity={0} />\r\n                                            </linearGradient>\r\n                                            <linearGradient id=\"colorUp2\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                                <stop offset=\"5%\" stopColor=\"#34d399\" stopOpacity={0.4} />\r\n                                                <stop offset=\"95%\" stopColor=\"#34d399\" stopOpacity={0} />\r\n                                            </linearGradient>\r\n                                        </defs>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\r\n                                        <XAxis dataKey=\"timestamp\" stroke=\"#4b5563\" fontSize={10} tickCount={5} />\r\n                                        <YAxis stroke=\"#4b5563\" fontSize={10} />\r\n                                        <Tooltip contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }} itemStyle={{ color: '#e5e7eb' }} />\r\n                                        <Area type=\"monotone\" dataKey=\"download_bytes\" stroke=\"#22d3ee\" strokeWidth={2} fillOpacity={1} fill=\"url(#colorDown2)\" name=\"Download\" />\r\n                                        <Area type=\"monotone\" dataKey=\"upload_bytes\" stroke=\"#34d399\" strokeWidth={2} fillOpacity={1} fill=\"url(#colorUp2)\" name=\"Upload\" />\r\n                                    </AreaChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Latency Chart */}\r\n                        <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                            <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                <Wifi className=\"w-4 h-4 text-amber-400\" /> Network Latency\r\n                            </h3>\r\n                            <div className=\"h-[250px]\">\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <LineChart data={latencyData}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\r\n                                        <XAxis dataKey=\"timestamp\" stroke=\"#4b5563\" fontSize={10} />\r\n                                        <YAxis stroke=\"#4b5563\" fontSize={10} />\r\n                                        <Tooltip contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }} itemStyle={{ color: '#e5e7eb' }} />\r\n                                        <Line type=\"monotone\" dataKey=\"latency_ms\" stroke=\"#f59e0b\" strokeWidth={2} dot={false} name=\"Latency (ms)\" />\r\n                                    </LineChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Row 2: Protocol Distribution + Top Devices */}\r\n                    {/* Row 2: Protocol Distribution + Top Devices */}\r\n                    {dashboardConfig.showProtocolCharts && (\r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                            {/* Protocol Distribution */}\r\n                            <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                                <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                    <Server className=\"w-4 h-4 text-purple-400\" /> Protocol Distribution\r\n                                </h3>\r\n                                <div className=\"h-[250px] flex items-center\">\r\n                                    <ResponsiveContainer width=\"50%\" height=\"100%\">\r\n                                        <PieChart>\r\n                                            <Pie data={protocolChartData} cx=\"50%\" cy=\"50%\" innerRadius={45} outerRadius={75}\r\n                                                paddingAngle={3} dataKey=\"value\" stroke=\"none\">\r\n                                                {protocolChartData.map((entry, i) => (\r\n                                                    <Cell key={i} fill={entry.color} />\r\n                                                ))}\r\n                                            </Pie>\r\n                                            <Tooltip contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }} itemStyle={{ color: '#e5e7eb' }} />\r\n                                        </PieChart>\r\n                                    </ResponsiveContainer>\r\n                                    <div className=\"flex flex-col gap-1.5 pl-2\">\r\n                                        {protocolChartData.map((entry) => (\r\n                                            <div key={entry.name} className=\"flex items-center gap-2 text-xs\">\r\n                                                <div className=\"w-2.5 h-2.5 rounded-full\" style={{ background: entry.color }} />\r\n                                                <span className=\"text-gray-400 w-12\">{entry.name}</span>\r\n                                                <span className=\"text-gray-500 font-mono\">{entry.value.toLocaleString()}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Top Devices */}\r\n                            <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                                <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                    <Monitor className=\"w-4 h-4 text-cyan-400\" /> Top Devices by Traffic\r\n                                </h3>\r\n                                <div className=\"h-[250px]\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <BarChart data={analyticsData.top_devices.map(d => ({\r\n                                            name: d.hostname || d.ip || d.mac.slice(-5),\r\n                                            Download: d.download,\r\n                                            Upload: d.upload\r\n                                        }))} layout=\"vertical\" margin={{ left: 60 }}>\r\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\r\n                                            <XAxis type=\"number\" stroke=\"#4b5563\" fontSize={10} tickFormatter={(v: number) => formatBytes(v)} />\r\n                                            <YAxis type=\"category\" dataKey=\"name\" stroke=\"#4b5563\" fontSize={11} width={55} />\r\n                                            <Tooltip contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }} itemStyle={{ color: '#e5e7eb' }}\r\n                                                formatter={(value: number) => formatBytes(value)} />\r\n                                            <Bar dataKey=\"Download\" fill=\"#22d3ee\" radius={[0, 4, 4, 0]} barSize={10} />\r\n                                            <Bar dataKey=\"Upload\" fill=\"#34d399\" radius={[0, 4, 4, 0]} barSize={10} />\r\n                                        </BarChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Row 3: Packet Size Distribution + Bytes per Protocol */}\r\n                    {/* Row 3: Packet Size Distribution + Bytes per Protocol */}\r\n                    {dashboardConfig.showPacketCharts && (\r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                            {/* Packet Size Distribution */}\r\n                            <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                                <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                    <Layers className=\"w-4 h-4 text-amber-400\" /> Packet Size Distribution\r\n                                </h3>\r\n                                <div className=\"h-[220px]\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <BarChart data={sizeDistData} layout=\"vertical\" margin={{ left: 10, right: 30, top: 10, bottom: 5 }}>\r\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\r\n                                            <XAxis type=\"number\" stroke=\"#4b5563\" fontSize={10} tickFormatter={(v: number) => formatNumber(v)} />\r\n                                            <YAxis type=\"category\" dataKey=\"shortName\" stroke=\"#4b5563\" fontSize={10} width={50} />\r\n                                            <Tooltip\r\n                                                contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }}\r\n                                                itemStyle={{ color: '#e5e7eb' }}\r\n                                                formatter={(value: number) => value.toLocaleString()}\r\n                                            />\r\n                                            <Bar dataKey=\"value\" radius={[0, 6, 6, 0]} barSize={14} name=\"Packets\">\r\n                                                {sizeDistData.map((entry, i) => (\r\n                                                    <Cell key={i} fill={entry.color} />\r\n                                                ))}\r\n                                            </Bar>\r\n                                        </BarChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Bytes per Protocol */}\r\n                            <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-3 md:p-4\">\r\n                                <h3 className=\"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2\">\r\n                                    <BarChart3 className=\"w-4 h-4 text-blue-400\" /> Traffic Volume by Protocol\r\n                                </h3>\r\n                                <div className=\"h-[220px]\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <BarChart data={bytesPerProtoData} margin={{ left: 5 }}>\r\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\r\n                                            <XAxis dataKey=\"name\" stroke=\"#4b5563\" fontSize={10} />\r\n                                            <YAxis stroke=\"#4b5563\" fontSize={10} tickFormatter={(v: number) => formatBytes(v)} />\r\n                                            <Tooltip\r\n                                                contentStyle={{ backgroundColor: '#111827', borderColor: '#1f2937', borderRadius: '8px' }}\r\n                                                itemStyle={{ color: '#e5e7eb' }}\r\n                                                formatter={(value: number) => formatBytes(value)}\r\n                                            />\r\n                                            <Bar dataKey=\"value\" radius={[4, 4, 0, 0]} barSize={28} name=\"Bytes\">\r\n                                                {bytesPerProtoData.map((entry, i) => (\r\n                                                    <Cell key={i} fill={entry.color} />\r\n                                                ))}\r\n                                            </Bar>\r\n                                        </BarChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ CONNECTIONS ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'connections' && (\r\n                <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl overflow-hidden\">\r\n                    <div className=\"px-4 py-3 border-b border-gray-800 flex items-center gap-2\">\r\n                        <Globe className=\"w-3.5 h-3.5 text-blue-400\" />\r\n                        <h3 className=\"text-xs font-medium text-white\">External Connections</h3>\r\n                        <span className=\"ml-auto text-xs text-gray-500\">{externalConnections.length} destinations</span>\r\n                    </div>\r\n                    <div className=\"h-[400px] overflow-y-auto custom-scrollbar\">\r\n                        <table className=\"w-full text-sm\">\r\n                            <thead className=\"sticky top-0 bg-gray-900/95 border-b border-gray-800\">\r\n                                <tr>\r\n                                    <th className=\"text-left text-gray-500 font-medium px-5 py-3 text-xs\">IP ADDRESS</th>\r\n                                    <th className=\"text-left text-gray-500 font-medium px-5 py-3 text-xs\">LOCATION</th>\r\n                                    <th className=\"text-right text-gray-500 font-medium px-5 py-3 text-xs\">HITS</th>\r\n                                    <th className=\"text-right text-gray-500 font-medium px-5 py-3 text-xs\">TRAFFIC</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {externalConnections.length === 0 ? (\r\n                                    <tr><td colSpan={4} className=\"text-center text-gray-600 py-12\">No external connections detected yet</td></tr>\r\n                                ) : (\r\n                                    externalConnections.sort((a, b) => b.bytes - a.bytes).map((conn, i) => (\r\n                                        <tr key={i} className=\"border-b border-gray-800/30 hover:bg-gray-800/30 transition-colors\">\r\n                                            <td className=\"px-5 py-3 font-mono text-gray-300 text-xs\">{conn.ip}</td>\r\n                                            <td className=\"px-5 py-3 text-gray-400 text-xs\">\r\n                                                <span className=\"mr-1\">­ƒîì</span> {conn.city}, {conn.country}\r\n                                            </td>\r\n                                            <td className=\"px-5 py-3 font-mono text-gray-400 text-xs text-right\">{conn.hits.toLocaleString()}</td>\r\n                                            <td className=\"px-5 py-3 font-mono text-cyan-400 text-xs text-right\">{formatBytes(conn.bytes)}</td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ SECURITY ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'security' && (\r\n                <div className=\"bg-gray-900/60 border border-gray-800 rounded-xl p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-3\">\r\n                        <Shield className=\"h-4 w-4 text-indigo-400\" />\r\n                        <h3 className=\"text-sm font-semibold text-white\">Security Events</h3>\r\n                        <span className=\"ml-auto text-[10px] text-gray-500\">{securityEvents.length} events</span>\r\n                    </div>\r\n                    <div className=\"h-[400px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                        {securityEvents.length === 0 ? (\r\n                            <div className=\"text-center text-gray-500 py-8 flex flex-col items-center gap-2\">\r\n                                <Shield className=\"w-8 h-8 text-green-500/50\" />\r\n                                <span>No security events detected. Safe seas! ­ƒîè</span>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-3\">\r\n                                {securityEvents.map((event) => (\r\n                                    <div key={event.id} className=\"flex items-start justify-between p-3 rounded-lg bg-gray-800/40 border border-gray-700/50 hover:border-gray-600/50 transition-colors\">\r\n                                        <div className=\"flex items-start gap-3\">\r\n                                            <AlertTriangle className={`h-5 w-5 mt-0.5 flex-shrink-0 ${event.severity === 'CRITICAL' ? 'text-red-500' :\r\n                                                event.severity === 'HIGH' ? 'text-orange-500' : 'text-yellow-500'\r\n                                                }`} />\r\n                                            <div>\r\n                                                <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                                    <span className=\"font-semibold text-gray-200 text-sm\">{event.event_type}</span>\r\n                                                    <span className=\"px-1.5 py-0.5 rounded text-[10px] border border-gray-700 text-gray-500 font-mono\">\r\n                                                        {event.source_ip || 'Unknown IP'}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <p className=\"text-xs text-gray-400 mt-1\">{event.description}</p>\r\n                                                <p className=\"text-[10px] text-gray-600 mt-1.5\">{new Date(event.timestamp).toLocaleString()}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <span className={`px-2 py-0.5 rounded text-[10px] font-bold flex-shrink-0 ${event.severity === 'CRITICAL' ? 'bg-red-500/20 text-red-400' :\r\n                                            event.severity === 'HIGH' ? 'bg-orange-500/20 text-orange-400' :\r\n                                                'bg-yellow-500/20 text-yellow-400'\r\n                                            }`}>\r\n                                            {event.severity}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ HISTORY ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'history' && (\r\n                <YearlyStatsView />\r\n            )}\r\n\r\n            {/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ DNS LOGS ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */}\r\n            {activeView === 'dns' && (\r\n                <DnsQueryLog />\r\n            )}\r\n\r\n            {activeView === 'comparison' && (\r\n                <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n                    <NetworkComparison />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AnalyticsDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\BottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\CommandPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ConnectionGlobe.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DeviceDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DevicesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DnsQueryLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\DockerManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\GroupManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NetworkComparison.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NetworkMap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\NotificationCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\OnboardingTour.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\PredictionWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\QuotaManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SecurityAlertsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ServerStatusCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SettingsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SpeedtestPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SpeedtestSettingsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\SystemDetailOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nD:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx:42:27\n  40 |\n  41 |     const deviceStats = useMemo(() => devices.slice(0, 5).map(() => ({\n> 42 |         gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\n     |                           ^^^^^^^^^^^^^ Cannot call impure function\n  43 |         mbps: Math.floor(Math.random() * 50),\n  44 |     })), [devices]);\n  45 |","line":42,"column":27,"nodeType":null,"endLine":42,"endColumn":40},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nD:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx:42:61\n  40 |\n  41 |     const deviceStats = useMemo(() => devices.slice(0, 5).map(() => ({\n> 42 |         gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\n     |                                                             ^^^^^^^^^^^^^ Cannot call impure function\n  43 |         mbps: Math.floor(Math.random() * 50),\n  44 |     })), [devices]);\n  45 |","line":42,"column":61,"nodeType":null,"endLine":42,"endColumn":74},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nD:\\Gravity\\StatSea\\frontend\\src\\components\\TopDevicesWidget.tsx:43:26\n  41 |     const deviceStats = useMemo(() => devices.slice(0, 5).map(() => ({\n  42 |         gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\n> 43 |         mbps: Math.floor(Math.random() * 50),\n     |                          ^^^^^^^^^^^^^ Cannot call impure function\n  44 |     })), [devices]);\n  45 |\n  46 |     return (","line":43,"column":26,"nodeType":null,"endLine":43,"endColumn":39}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\nimport { Laptop, Smartphone, Tv } from 'lucide-react';\r\nimport { API_CONFIG } from '../config/apiConfig';\r\n\r\ninterface Device {\r\n    vendor?: string;\r\n    type?: string;\r\n    hostname?: string;\r\n    ip_address?: string;\r\n    ip?: string;\r\n}\r\n\r\nexport function TopDevicesWidget() {\r\n    const [devices, setDevices] = useState<Device[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchDevices = () => {\r\n            fetch(API_CONFIG.ENDPOINTS.DEVICES.LIST)\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (Array.isArray(data)) setDevices(data);\r\n                })\r\n                .catch(err => console.error(\"Failed to fetch devices\", err))\r\n                .finally(() => setLoading(false));\r\n        };\r\n\r\n        fetchDevices();\r\n        const interval = setInterval(fetchDevices, 10000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const getIcon = (vendor: string = '', type: string = '') => {\r\n        const v = (vendor || '').toLowerCase();\r\n        const t = (type || '').toLowerCase();\r\n        if (t === 'mobile' || v.includes('apple') || v.includes('samsung') || v.includes('pixel') || v.includes('phone')) return <Smartphone className=\"w-4 h-4\" />;\r\n        if (t === 'iot' || v.includes('tv') || v.includes('amazon') || v.includes('roku') || v.includes('google')) return <Tv className=\"w-4 h-4\" />;\r\n        return <Laptop className=\"w-4 h-4\" />;\r\n    };\r\n\r\n    const deviceStats = useMemo(() => devices.slice(0, 5).map(() => ({\r\n        gb: `${Math.floor(Math.random() * 10)}.${Math.floor(Math.random() * 9)}`,\r\n        mbps: Math.floor(Math.random() * 50),\r\n    })), [devices]);\r\n\r\n    return (\r\n        <div className=\"bg-card border border-border rounded-xl p-6 shadow-sm\">\r\n            <h3 className=\"text-lg font-semibold mb-4 text-foreground\">Top Devices</h3>\r\n            <div className=\"space-y-3\">\r\n                {loading ? (\r\n                    [...Array(5)].map((_, i) => (\r\n                        <div key={i} className=\"flex items-center justify-between p-2\">\r\n                            <div className=\"flex items-center gap-3 w-full\">\r\n                                <div className=\"w-8 h-8 rounded-full bg-muted animate-pulse\" />\r\n                                <div className=\"space-y-2 flex-1\">\r\n                                    <div className=\"h-3 w-24 bg-muted animate-pulse rounded\" />\r\n                                    <div className=\"h-2 w-16 bg-muted animate-pulse rounded\" />\r\n                                </div>\r\n                                <div className=\"text-right space-y-2\">\r\n                                    <div className=\"h-3 w-12 bg-muted animate-pulse rounded ml-auto\" />\r\n                                    <div className=\"h-2 w-16 bg-muted animate-pulse rounded ml-auto\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <>\r\n                        {devices.slice(0, 5).map((device, i) => (\r\n                            <div key={i} className=\"flex items-center justify-between p-2 hover:bg-muted/50 rounded-lg transition-colors group\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-2 rounded-full bg-blue-500/10 text-blue-500 group-hover:bg-blue-500/20 transition-colors\">\r\n                                        {getIcon(device.vendor, device.type)}\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-sm font-medium text-foreground\">{device.hostname || device.ip_address || device.ip}</div>\r\n                                        <div className=\"text-xs text-muted-foreground font-mono\">{device.vendor || 'Unknown Vendor'}</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className=\"text-sm font-mono text-foreground\">{deviceStats[i]?.gb ?? '0.0'} GB</div>\r\n                                    <div className=\"text-xs text-green-500 dark:text-green-400\">Ôåæ {deviceStats[i]?.mbps ?? 0} Mbps</div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        {devices.length === 0 && <div className=\"text-muted-foreground text-center py-6\">Connecting to detector...</div>}\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\TopStatsRow.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Gravity\\StatSea\\frontend\\src\\components\\TopStatsRow.tsx:59:9\n  57 |\n  58 |     useEffect(() => {\n> 59 |         fetchStats();\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  60 |         fetchHealth();\n  61 |         fetchHistory();\n  62 |         const interval = setInterval(() => {","line":59,"column":9,"nodeType":null,"endLine":59,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ArrowDown, ArrowUp, Laptop, Activity } from 'lucide-react';\r\nimport { AreaChart, Area, ResponsiveContainer, YAxis } from 'recharts';\r\nimport { API_CONFIG } from '../config/apiConfig';\r\nimport axiosInstance from '../config/axiosInstance';\r\nimport { StatCardSkeleton } from './skeletons/StatCardSkeleton';\r\n\r\ninterface TopStatsData {\r\n    network: {\r\n        sent: number;\r\n        recv: number;\r\n    };\r\n    active_devices: number;\r\n}\r\n\r\ninterface HistoryData {\r\n    timestamp: string;\r\n    upload: number;\r\n    download: number;\r\n}\r\n\r\nconst TopStatsRow = () => {\r\n    const [stats, setStats] = useState<TopStatsData | null>(null);\r\n    const [health, setHealth] = useState({ score: 0, status: 'Unknown' });\r\n    const [history, setHistory] = useState<HistoryData[]>([]);\r\n\r\n    const fetchStats = async () => {\r\n        try {\r\n            const res = await axiosInstance.get(API_CONFIG.ENDPOINTS.SYSTEM.INFO);\r\n            setStats(res.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch stats:', error);\r\n        }\r\n    };\r\n\r\n    const fetchHealth = async () => {\r\n        try {\r\n            const res = await axiosInstance.get(API_CONFIG.ENDPOINTS.HEALTH);\r\n            setHealth({\r\n                score: res.data.score ?? (res.data.status === 'healthy' ? 100 : 0),\r\n                status: res.data.status || 'Excellent'\r\n            });\r\n        } catch (error) {\r\n            console.error('Failed to fetch health:', error);\r\n        }\r\n    };\r\n\r\n    const fetchHistory = async () => {\r\n        try {\r\n            const res = await axiosInstance.get(`${API_CONFIG.ENDPOINTS.ANALYTICS.HISTORY}?limit=30`);\r\n            setHistory(res.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch history:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchStats();\r\n        fetchHealth();\r\n        fetchHistory();\r\n        const interval = setInterval(() => {\r\n            fetchStats();\r\n            fetchHealth();\r\n            fetchHistory();\r\n        }, 5000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const formatBytes = (bytes: number) => {\r\n        if (bytes === 0) return '0 B';\r\n        const k = 1024;\r\n        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n    };\r\n\r\n    const cards = [\r\n        {\r\n            title: 'Total Download',\r\n            value: stats ? formatBytes(stats.network.recv) : '...',\r\n            icon: ArrowDown,\r\n            color: 'text-blue-400',\r\n            bg: 'bg-blue-500/10',\r\n            border: 'border-blue-500/20',\r\n            chartData: history.map(h => ({ value: h.download })),\r\n            chartColor: '#60a5fa'\r\n        },\r\n        {\r\n            title: 'Total Upload',\r\n            value: stats ? formatBytes(stats.network.sent) : '...',\r\n            icon: ArrowUp,\r\n            color: 'text-emerald-400',\r\n            bg: 'bg-emerald-500/10',\r\n            border: 'border-emerald-500/20',\r\n            chartData: history.map(h => ({ value: h.upload })),\r\n            chartColor: '#34d399'\r\n        },\r\n        {\r\n            title: 'Active Devices',\r\n            value: stats ? stats.active_devices.toString() : '...',\r\n            icon: Laptop,\r\n            color: 'text-purple-400',\r\n            bg: 'bg-purple-500/10',\r\n            border: 'border-purple-500/20',\r\n            chartData: null, // No history for devices yet\r\n            chartColor: '#c084fc'\r\n        },\r\n        {\r\n            title: 'Network Health',\r\n            value: `${health.score}%`,\r\n            subValue: health.status,\r\n            icon: Activity,\r\n            color: health.status === 'Excellent' ? 'text-emerald-400' : 'text-amber-400',\r\n            bg: health.status === 'Excellent' ? 'bg-emerald-500/10' : 'bg-amber-500/10',\r\n            border: health.status === 'Excellent' ? 'border-emerald-500/20' : 'border-amber-500/20',\r\n            chartData: null,\r\n            chartColor: '#fbbf24'\r\n        }\r\n    ];\r\n\r\n    if (!stats) {\r\n        return (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n                {[1, 2, 3, 4].map((i) => (\r\n                    <StatCardSkeleton key={i} />\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n            {cards.map((card, idx) => (\r\n                <motion.div\r\n                    key={idx}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: idx * 0.1 }}\r\n                    className=\"bg-[#0A0B0E] border border-white/5 rounded-2xl p-4 relative overflow-hidden group\"\r\n                >\r\n                    <div className=\"flex items-center justify-between mb-2 relative z-10\">\r\n                        <div>\r\n                            <p className=\"text-white/40 text-[10px] uppercase font-bold tracking-wider mb-1\">\r\n                                {card.title}\r\n                            </p>\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <h4 className=\"text-white font-bold text-xl\">{card.value}</h4>\r\n                                {card.subValue && (\r\n                                    <span className={`text-[10px] font-medium ${card.color}`}>\r\n                                        {card.subValue}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        <div className={`w-10 h-10 rounded-xl ${card.bg} flex items-center justify-center border ${card.border}`}>\r\n                            <card.icon className={`w-5 h-5 ${card.color}`} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sparkline Chart */}\r\n                    {card.chartData && card.chartData.length > 0 && (\r\n                        <div className=\"absolute bottom-0 left-0 right-0 h-12 opacity-20 group-hover:opacity-30 transition-opacity\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <AreaChart data={card.chartData}>\r\n                                    <defs>\r\n                                        <linearGradient id={`gradient-${idx}`} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                            <stop offset=\"0%\" stopColor={card.chartColor} stopOpacity={0.5} />\r\n                                            <stop offset=\"100%\" stopColor={card.chartColor} stopOpacity={0} />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                    <YAxis hide domain={['auto', 'auto']} />\r\n                                    <Area\r\n                                        type=\"monotone\"\r\n                                        dataKey=\"value\"\r\n                                        stroke={card.chartColor}\r\n                                        fill={`url(#gradient-${idx})`}\r\n                                        strokeWidth={2}\r\n                                        isAnimationActive={false}\r\n                                    />\r\n                                </AreaChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    )}\r\n                </motion.div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TopStatsRow;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\UptimeTimeline.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLogs'. Either include it or remove the dependency array.","line":47,"column":8,"nodeType":"ArrayExpression","endLine":47,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [deviceId, fetchLogs, range]","fix":{"range":[1612,1629],"text":"[deviceId, fetchLogs, range]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\r\n\r\nimport { RefreshCw } from 'lucide-react';\r\nimport { DeviceStatusLog } from '../types';\r\n\r\ninterface UptimeTimelineProps {\r\n    deviceId: number;\r\n}\r\n\r\ntype TimeRange = '24h' | '7d' | '30d';\r\n\r\nexport function UptimeTimeline({ deviceId }: UptimeTimelineProps) {\r\n    const [range, setRange] = useState<TimeRange>('24h');\r\n    const [logs, setLogs] = useState<DeviceStatusLog[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [stats, setStats] = useState({ uptimePercent: 0, onlineDuration: 0, offlineDuration: 0 });\r\n\r\n    const fetchLogs = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const end = new Date();\r\n            const start = new Date();\r\n\r\n            if (range === '24h') start.setHours(start.getHours() - 24);\r\n            if (range === '7d') start.setDate(start.getDate() - 7);\r\n            if (range === '30d') start.setDate(start.getDate() - 30);\r\n\r\n            const queryParams = new URLSearchParams({\r\n                start: start.toISOString(),\r\n                end: end.toISOString(),\r\n                limit: '1000'\r\n            });\r\n\r\n            const res = await fetch(`/api/devices/${deviceId}/uptime?${queryParams}`);\r\n            if (!res.ok) throw new Error('Failed to fetch uptime logs');\r\n            const data = await res.json();\r\n            setLogs(data);\r\n        } catch (error) {\r\n            console.error(\"Error fetching uptime logs:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchLogs();\r\n    }, [deviceId, range]);\r\n\r\n    // Process logs into segments\r\n    const segments = useMemo(() => {\r\n        const now = new Date();\r\n        const start = new Date();\r\n        if (range === '24h') start.setHours(start.getHours() - 24);\r\n        if (range === '7d') start.setDate(start.getDate() - 7);\r\n        if (range === '30d') start.setDate(start.getDate() - 30);\r\n\r\n        // Sort logs ascending for processing\r\n        const sortedLogs = [...logs].sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\r\n\r\n        const timelineSegments: { start: number; end: number; status: 'online' | 'offline' }[] = [];\r\n\r\n        // Find initial status (most recent log before start time) - naive approach: assume online if no prior logs, or check backend?\r\n        // For now, let's just process available logs. \r\n        // Improvement: We should probably fetch one log BEFORE the start time to know the initial state.\r\n        // But for this version, we will assume state based on the first log found within range or just 'unknown' before first log.\r\n\r\n        let currentStatus: 'online' | 'offline' = 'online'; // Default assumption or need better logic\r\n        let lastTime = start.getTime();\r\n\r\n        // If we have logs, check the first one. If it's \"offline\", it means it WENT offline at that time.\r\n        // So before that it was \"online\".\r\n\r\n        if (sortedLogs.length > 0) {\r\n            const firstLog = sortedLogs[0];\r\n            // If first log is \"offline\", it means it was online before.\r\n            // If first log is \"online\", it means it was offline before.\r\n            currentStatus = firstLog.status === 'offline' ? 'online' : 'offline';\r\n        }\r\n\r\n        sortedLogs.forEach(log => {\r\n            const logTime = new Date(log.timestamp).getTime();\r\n            if (logTime < start.getTime()) return; // Should be filtered by backend but double check\r\n\r\n            // Segment from lastTime to logTime\r\n            if (logTime > lastTime) {\r\n                timelineSegments.push({\r\n                    start: lastTime,\r\n                    end: logTime,\r\n                    status: currentStatus\r\n                });\r\n            }\r\n\r\n            // Update status and time\r\n            currentStatus = log.status as 'online' | 'offline';\r\n            lastTime = logTime;\r\n        });\r\n\r\n        // Add final segment to now\r\n        if (now.getTime() > lastTime) {\r\n            timelineSegments.push({\r\n                start: lastTime,\r\n                end: now.getTime(),\r\n                status: currentStatus\r\n            });\r\n        }\r\n\r\n        // Calculate stats\r\n        let totalOnline = 0;\r\n        let totalOffline = 0;\r\n        timelineSegments.forEach(seg => {\r\n            const duration = seg.end - seg.start;\r\n            if (seg.status === 'online') totalOnline += duration;\r\n            else totalOffline += duration;\r\n        });\r\n\r\n        const total = totalOnline + totalOffline;\r\n        setStats({\r\n            uptimePercent: total > 0 ? (totalOnline / total) * 100 : 100,\r\n            onlineDuration: totalOnline,\r\n            offlineDuration: totalOffline\r\n        });\r\n\r\n        return timelineSegments;\r\n    }, [logs, range]);\r\n\r\n    const formatDuration = (ms: number) => {\r\n        const seconds = Math.floor(ms / 1000);\r\n        const minutes = Math.floor(seconds / 60);\r\n        const hours = Math.floor(minutes / 60);\r\n        const days = Math.floor(hours / 24);\r\n\r\n        if (days > 0) return `${days}d ${hours % 24}h`;\r\n        if (hours > 0) return `${hours}h ${minutes % 60}m`;\r\n        return `${minutes}m`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <h3 className=\"text-sm font-semibold text-gray-200\">Uptime Timeline</h3>\r\n                    <div className=\"px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 text-xs font-mono\">\r\n                        {stats.uptimePercent.toFixed(2)}%\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex bg-white/5 rounded-lg p-0.5\">\r\n                    {(['24h', '7d', '30d'] as TimeRange[]).map((r) => (\r\n                        <button\r\n                            key={r}\r\n                            onClick={() => setRange(r)}\r\n                            className={`px-3 py-1 text-xs font-medium rounded-md transition-all ${range === r\r\n                                ? 'bg-blue-500/20 text-blue-400 shadow-sm'\r\n                                : 'text-gray-400 hover:text-gray-300'\r\n                                }`}\r\n                        >\r\n                            {r}\r\n                        </button>\r\n                    ))}\r\n                    <button\r\n                        onClick={() => fetchLogs()}\r\n                        className=\"ml-1 px-2 text-gray-400 hover:text-white transition-colors\"\r\n                        disabled={loading}\r\n                    >\r\n                        <RefreshCw className={`w-3 h-3 ${loading ? 'animate-spin' : ''}`} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Timeline Visualization */}\r\n            <div className=\"relative h-8 bg-white/5 rounded-lg overflow-hidden flex w-full\">\r\n                {segments.map((seg, i) => {\r\n                    const totalDuration = segments.reduce((acc, s) => acc + (s.end - s.start), 0);\r\n                    const widthPercent = ((seg.end - seg.start) / totalDuration) * 100;\r\n\r\n                    // Don't render tiny segments that might clutter (optional optimization)\r\n                    if (widthPercent < 0.1) return null;\r\n\r\n                    return (\r\n                        <div\r\n                            key={i}\r\n                            className={`h-full border-r border-black/10 last:border-0 hover:brightness-110 transition-all cursor-help relative group ${seg.status === 'online' ? 'bg-emerald-500/80' : 'bg-red-500/80'\r\n                                }`}\r\n                            style={{ width: `${widthPercent}%` }}\r\n                        >\r\n                            {/* Tooltip */}\r\n                            <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 hidden group-hover:block z-20 min-w-[150px]\">\r\n                                <div className=\"bg-gray-900 border border-white/10 rounded-lg p-2 shadow-xl text-xs\">\r\n                                    <div className={`font-bold mb-1 ${seg.status === 'online' ? 'text-green-400' : 'text-red-400'}`}>\r\n                                        {seg.status === 'online' ? 'Online' : 'Offline'}\r\n                                    </div>\r\n                                    <div className=\"text-gray-400\">\r\n                                        {new Date(seg.start).toLocaleString(undefined, {\r\n                                            month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'\r\n                                        })}\r\n                                    </div>\r\n                                    <div className=\"text-gray-500 text-[10px] mt-1\">\r\n                                        Duration: {formatDuration(seg.end - seg.start)}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {segments.length === 0 && (\r\n                    <div className=\"w-full h-full flex items-center justify-center text-xs text-gray-500 italic\">\r\n                        No data for this period\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Legend / Stats */}\r\n            <div className=\"flex items-center gap-6 text-xs text-gray-400\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-emerald-500/80\" />\r\n                    <span>Online: {formatDuration(stats.onlineDuration)}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-red-500/80\" />\r\n                    <span>Offline: {formatDuration(stats.offlineDuration)}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\UserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":137,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":149,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":149,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":161,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport axiosInstance from '../config/axiosInstance';\r\nimport {\r\n    Users,\r\n    UserPlus,\r\n    Search,\r\n    Edit2,\r\n    Trash2,\r\n    Shield,\r\n    Mail,\r\n    Calendar,\r\n    CheckCircle2,\r\n    XCircle,\r\n    UserCircle\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'sonner';\r\n\r\ninterface User {\r\n    id: number;\r\n    username: string;\r\n    email: string;\r\n    full_name: string | null;\r\n    is_active: boolean;\r\n    is_admin: boolean;\r\n    last_login: string | null;\r\n    created_at: string;\r\n}\r\n\r\nexport const UserManagement: React.FC = () => {\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive'>('all');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [modalMode, setModalMode] = useState<'add' | 'edit'>('add');\r\n    const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n    const [formData, setFormData] = useState({\r\n        username: '',\r\n        email: '',\r\n        full_name: '',\r\n        password: '',\r\n        is_admin: false,\r\n        is_active: true\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Load from cache initially\r\n        const cachedUsers = localStorage.getItem('statsea_cache_users');\r\n        if (cachedUsers) {\r\n            setUsers(JSON.parse(cachedUsers));\r\n            setIsLoading(false);\r\n        }\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            if (!localStorage.getItem('statsea_cache_users')) {\r\n                setIsLoading(true);\r\n            }\r\n            const response = await axiosInstance.get('/admin/users');\r\n            setUsers(response.data);\r\n            localStorage.setItem('statsea_cache_users', JSON.stringify(response.data));\r\n        } catch (error) {\r\n            console.error('Failed to fetch users:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleOpenModal = (mode: 'add' | 'edit', user?: User) => {\r\n        setModalMode(mode);\r\n        if (mode === 'edit' && user) {\r\n            setSelectedUser(user);\r\n            setFormData({\r\n                username: user.username,\r\n                email: user.email,\r\n                full_name: user.full_name || '',\r\n                password: '', // Password remains empty unless changing\r\n                is_admin: user.is_admin,\r\n                is_active: user.is_active\r\n            });\r\n        } else {\r\n            setSelectedUser(null);\r\n            setFormData({\r\n                username: '',\r\n                email: '',\r\n                full_name: '',\r\n                password: '',\r\n                is_admin: false,\r\n                is_active: true\r\n            });\r\n        }\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            if (modalMode === 'add') {\r\n                await axiosInstance.post('/admin/users', formData);\r\n                toast.success('User created successfully');\r\n            } else if (selectedUser) {\r\n                const updateData: Partial<typeof formData> & { password?: string } = {\r\n                    email: formData.email,\r\n                    full_name: formData.full_name,\r\n                    is_admin: formData.is_admin,\r\n                    is_active: formData.is_active\r\n                };\r\n                if (formData.password) {\r\n                    updateData.password = formData.password;\r\n                }\r\n                await axiosInstance.put(`/admin/users/${selectedUser.id}`, updateData);\r\n                toast.success('User updated successfully');\r\n            }\r\n            setIsModalOpen(false);\r\n            fetchUsers();\r\n        } catch (error: unknown) {\r\n            const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n            if (axios.isAxiosError(error)) {\r\n                toast.error(error.response?.data?.detail || `Failed to ${modalMode} user`);\r\n            } else {\r\n                toast.error(errorMessage);\r\n            }\r\n        }\r\n    };\r\n\r\n    const toggleUserStatus = async (user: User) => {\r\n        try {\r\n            await axiosInstance.put(`/admin/users/${user.id}`, {\r\n                is_active: !user.is_active\r\n            });\r\n            toast.success(`User ${user.is_active ? 'deactivated' : 'activated'} successfully`);\r\n            fetchUsers();\r\n        } catch (error) {\r\n            toast.error('Failed to update user status');\r\n        }\r\n    };\r\n\r\n    const toggleAdminStatus = async (user: User) => {\r\n        try {\r\n            await axiosInstance.put(`/admin/users/${user.id}`, {\r\n                is_admin: !user.is_admin\r\n            });\r\n            toast.success(`User updated successfully`);\r\n            fetchUsers();\r\n        } catch (error) {\r\n            toast.error('Failed to update admin permissions');\r\n        }\r\n    };\r\n\r\n    const deleteUser = async (userId: number) => {\r\n        if (!window.confirm('Are you sure you want to delete this user? This action cannot be undone.')) return;\r\n\r\n        try {\r\n            await axiosInstance.delete(`/admin/users/${userId}`);\r\n            toast.success('User deleted successfully');\r\n            fetchUsers();\r\n        } catch (error) {\r\n            toast.error('Failed to delete user');\r\n        }\r\n    };\r\n\r\n    const filteredUsers = users.filter(user => {\r\n        const matchesSearch = user.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.full_name?.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n        const matchesFilter = filterStatus === 'all' ||\r\n            (filterStatus === 'active' && user.is_active) ||\r\n            (filterStatus === 'inactive' && !user.is_active);\r\n\r\n        return matchesSearch && matchesFilter;\r\n    });\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <header className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n                        <Users className=\"w-8 h-8 text-blue-500\" />\r\n                        User Management\r\n                    </h1>\r\n                    <p className=\"text-slate-400 text-sm mt-1\">Manage system access, roles, and profiles</p>\r\n                </div>\r\n                <button\r\n                    className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-xl flex items-center gap-2 transition-all active:scale-95 text-sm font-medium\"\r\n                    onClick={() => handleOpenModal('add')}\r\n                >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    Add User\r\n                </button>\r\n            </header>\r\n\r\n            {/* Controls */}\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <div className=\"relative flex-1 group\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-blue-500 transition-colors\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by name, username or email...\"\r\n                        className=\"w-full bg-slate-900/50 border border-slate-800 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setFilterStatus('all')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'all' ? 'bg-blue-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        All Users\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFilterStatus('active')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'active' ? 'bg-emerald-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        Active\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFilterStatus('inactive')}\r\n                        className={`px-4 py-2 rounded-xl text-xs font-medium transition-all ${filterStatus === 'inactive' ? 'bg-red-600 text-white' : 'bg-slate-900/50 text-slate-400 border border-slate-800'}`}\r\n                    >\r\n                        Inactive\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Users Table */}\r\n            <div className=\"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl overflow-hidden shadow-xl\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead className=\"bg-slate-950/50 border-b border-slate-800 text-slate-400 text-xs font-semibold uppercase tracking-wider\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-4\">User</th>\r\n                            <th className=\"px-6 py-4\">Security Role</th>\r\n                            <th className=\"px-6 py-4\">Status</th>\r\n                            <th className=\"px-6 py-4\">Last Login</th>\r\n                            <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-slate-800\">\r\n                        <AnimatePresence>\r\n                            {filteredUsers.map((user) => (\r\n                                <motion.tr\r\n                                    key={user.id}\r\n                                    layout\r\n                                    initial={{ opacity: 0 }}\r\n                                    animate={{ opacity: 1 }}\r\n                                    exit={{ opacity: 0 }}\r\n                                    className=\"hover:bg-white/5 transition-colors group\"\r\n                                >\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-10 h-10 rounded-full bg-blue-500/10 border border-blue-500/20 flex items-center justify-center text-blue-500\">\r\n                                                <UserCircle className=\"w-6 h-6\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"text-sm font-semibold text-white\">{user.full_name || user.username}</div>\r\n                                                <div className=\"text-xs text-slate-500 flex items-center gap-1\">\r\n                                                    <Mail className=\"w-3 h-3\" />\r\n                                                    {user.email}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div\r\n                                            onClick={() => toggleAdminStatus(user)}\r\n                                            className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider cursor-pointer transition-all hover:scale-105 ${user.is_admin ? 'bg-purple-500/10 text-purple-400 border border-purple-500/20' : 'bg-slate-800 text-slate-400 border border-slate-700'}`}\r\n                                        >\r\n                                            <Shield className=\"w-3 h-3\" />\r\n                                            {user.is_admin ? 'Administrator' : 'General User'}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div\r\n                                            onClick={() => toggleUserStatus(user)}\r\n                                            className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider cursor-pointer transition-all hover:scale-105 ${user.is_active ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}`}\r\n                                        >\r\n                                            {user.is_active ? <CheckCircle2 className=\"w-3 h-3\" /> : <XCircle className=\"w-3 h-3\" />}\r\n                                            {user.is_active ? 'Active' : 'Disabled'}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex flex-col text-xs\">\r\n                                            <span className=\"text-slate-300 font-medium\">\r\n                                                {user.last_login ? new Date(user.last_login).toLocaleString() : 'Never'}\r\n                                            </span>\r\n                                            <span className=\"text-slate-500 flex items-center gap-1 mt-0.5\">\r\n                                                <Calendar className=\"w-3 h-3\" />\r\n                                                Joined {new Date(user.created_at).toLocaleDateString()}\r\n                                            </span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            <button\r\n                                                className=\"p-2 text-slate-400 hover:text-blue-400 hover:bg-blue-400/10 rounded-lg transition-all\"\r\n                                                onClick={() => handleOpenModal('edit', user)}\r\n                                            >\r\n                                                <Edit2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"p-2 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all\"\r\n                                                onClick={() => deleteUser(user.id)}\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </motion.tr>\r\n                            ))}\r\n                        </AnimatePresence>\r\n                        {filteredUsers.length === 0 && !isLoading && (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-12 text-center\">\r\n                                    <div className=\"flex flex-col items-center gap-2\">\r\n                                        <Search className=\"w-12 h-12 text-slate-700\" />\r\n                                        <p className=\"text-slate-500 font-medium\">No users found matching your criteria</p>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                        {isLoading && (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-12 text-center text-slate-500\">\r\n                                    Loading users...\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            <AnimatePresence>\r\n                {isModalOpen && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            className=\"bg-slate-900 border border-slate-800 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl\"\r\n                        >\r\n                            <div className=\"p-6 border-b border-slate-800 flex justify-between items-center\">\r\n                                <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                                    {modalMode === 'add' ? <UserPlus className=\"w-5 h-5 text-blue-500\" /> : <Edit2 className=\"w-5 h-5 text-blue-500\" />}\r\n                                    {modalMode === 'add' ? 'Add New User' : 'Edit User'}\r\n                                </h2>\r\n                                <button\r\n                                    onClick={() => setIsModalOpen(false)}\r\n                                    className=\"text-slate-500 hover:text-white transition-colors\"\r\n                                >\r\n                                    <XCircle className=\"w-6 h-6\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Username</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        disabled={modalMode === 'edit'}\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        value={formData.username}\r\n                                        onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n                                        placeholder=\"johndoe\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Full Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.full_name}\r\n                                        onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n                                        placeholder=\"John Doe\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Email Address</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        required\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.email}\r\n                                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                        placeholder=\"john@example.com\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                    <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">\r\n                                        {modalMode === 'add' ? 'Password' : 'New Password (Optional)'}\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        required={modalMode === 'add'}\r\n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all\"\r\n                                        value={formData.password}\r\n                                        onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                                        placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between py-2\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 rounded-lg bg-purple-500/10 border border-purple-500/20 text-purple-400\">\r\n                                            <Shield className=\"w-4 h-4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"text-sm font-medium text-white\">Administrator Access</div>\r\n                                            <div className=\"text-[10px] text-slate-500 uppercase font-bold tracking-tighter\">Elevated Permissions</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setFormData({ ...formData, is_admin: !formData.is_admin })}\r\n                                        className={`w-12 h-6 rounded-full transition-all relative ${formData.is_admin ? 'bg-blue-600' : 'bg-slate-800'}`}\r\n                                    >\r\n                                        <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${formData.is_admin ? 'right-1' : 'left-1'}`} />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between py-2\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 rounded-lg bg-emerald-500/10 border border-emerald-500/20 text-emerald-400\">\r\n                                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"text-sm font-medium text-white\">Account Status</div>\r\n                                            <div className=\"text-[10px] text-slate-500 uppercase font-bold tracking-tighter\">Active / Disabled</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setFormData({ ...formData, is_active: !formData.is_active })}\r\n                                        className={`w-12 h-6 rounded-full transition-all relative ${formData.is_active ? 'bg-emerald-600' : 'bg-slate-800'}`}\r\n                                    >\r\n                                        <div className={`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${formData.is_active ? 'right-1' : 'left-1'}`} />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"pt-4 flex gap-3\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setIsModalOpen(false)}\r\n                                        className=\"flex-1 bg-slate-800 hover:bg-slate-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2.5 rounded-xl text-sm font-medium shadow-lg shadow-blue-500/20 transition-all active:scale-95\"\r\n                                    >\r\n                                        {modalMode === 'add' ? 'Create User' : 'Save Changes'}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\YearlyStatsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1041,1044],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1041,1044],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1049,1052],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1049,1052],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData, period]","fix":{"range":[1375,1383],"text":"[fetchData, period]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer\r\n} from 'recharts';\r\nimport { Calendar, TrendingUp, Download, Upload, Activity } from 'lucide-react';\r\nimport { API_CONFIG } from '../config/apiConfig';\r\nimport axiosInstance from '../config/axiosInstance';\r\n\r\ninterface HistoryPoint {\r\n    date: string;\r\n    sent: number;\r\n    recv: number;\r\n}\r\n\r\nconst YearlyStatsView = () => {\r\n    const [period, setPeriod] = useState<'daily' | 'monthly' | 'yearly'>('daily');\r\n    const [data, setData] = useState<HistoryPoint[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await axiosInstance.get(API_CONFIG.ENDPOINTS.ANALYTICS.HISTORY_SYSTEM, {\r\n                params: { period }\r\n            });\r\n\r\n            // Backend returns oldest first for charts usually, but we should sort just in case\r\n            const sortedData = res.data.sort((a: any, b: any) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n            setData(sortedData);\r\n        } catch (error) {\r\n            console.error('Failed to fetch historical stats:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [period]);\r\n\r\n    const formatBytes = (bytes: number) => {\r\n        if (bytes === 0) return '0 B';\r\n        const k = 1024;\r\n        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    };\r\n\r\n    const formatDate = (dateStr: string) => {\r\n        const date = new Date(dateStr);\r\n        if (period === 'daily') return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\r\n        if (period === 'monthly') return date.toLocaleDateString([], { month: 'short', year: 'numeric' });\r\n        if (period === 'yearly') return date.getFullYear().toString();\r\n        return dateStr;\r\n    };\r\n\r\n    const totalRecv = data.reduce((acc, curr) => acc + curr.recv, 0);\r\n    const totalSent = data.reduce((acc, curr) => acc + curr.sent, 0);\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n            {/* Header & Controls */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-white/5 border border-white/10 rounded-2xl p-4 backdrop-blur-md\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2 bg-emerald-500/20 rounded-xl\">\r\n                        <TrendingUp className=\"w-5 h-5 text-emerald-400\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-white font-bold tracking-tight\">Long-term Analytics</h3>\r\n                        <p className=\"text-white/40 text-xs\">Historical network trends and growth</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex bg-black/40 p-1 rounded-xl border border-white/5\">\r\n                    {(['daily', 'monthly', 'yearly'] as const).map((p) => (\r\n                        <button\r\n                            key={p}\r\n                            onClick={() => setPeriod(p)}\r\n                            className={`px-4 py-1.5 rounded-lg text-xs font-semibold transition-all ${period === p\r\n                                ? 'bg-blue-600 text-white shadow-lg'\r\n                                : 'text-white/40 hover:text-white/70 hover:bg-white/5'\r\n                                }`}\r\n                        >\r\n                            <span className=\"capitalize\">{p}</span>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Summary Mini Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2 text-blue-400\">\r\n                        <Download className=\"w-4 h-4\" />\r\n                        <span className=\"text-[10px] font-bold uppercase tracking-wider\">Total Download</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold text-white\">{formatBytes(totalRecv)}</div>\r\n                    <div className=\"text-[10px] text-white/40 mt-1\">For selected period</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2 text-emerald-400\">\r\n                        <Upload className=\"w-4 h-4\" />\r\n                        <span className=\"text-[10px] font-bold uppercase tracking-wider\">Total Upload</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold text-white\">{formatBytes(totalSent)}</div>\r\n                    <div className=\"text-[10px] text-white/40 mt-1\">For selected period</div>\r\n                </div>\r\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-4\">\r\n                    <div className=\"flex items-center gap-2 mb-2 text-purple-400\">\r\n                        <Activity className=\"w-4 h-4\" />\r\n                        <span className=\"text-[10px] font-bold uppercase tracking-wider\">Total Traffic</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold text-white\">{formatBytes(totalRecv + totalSent)}</div>\r\n                    <div className=\"text-[10px] text-white/40 mt-1\">For selected period</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Chart */}\r\n            <div className=\"bg-white/5 border border-white/10 rounded-3xl p-6 relative overflow-hidden group\">\r\n                <div className=\"flex items-center justify-between mb-8 relative z-10\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Calendar className=\"w-4 h-4 text-blue-400\" />\r\n                        <span className=\"text-xs font-bold text-white tracking-widest uppercase\">Usage Timeline</span>\r\n                    </div>\r\n                    {loading && (\r\n                        <div className=\"flex items-center gap-2 text-blue-400 text-[10px] font-bold uppercase tracking-widest animate-pulse\">\r\n                            Refreshing...\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"h-[400px] w-full\">\r\n                    {data.length === 0 && !loading ? (\r\n                        <div className=\"h-full flex flex-col items-center justify-center text-white/20 gap-4\">\r\n                            <TrendingUp className=\"w-12 h-12 opacity-10\" />\r\n                            <p className=\"text-sm\">No historical data found for this period</p>\r\n                            <p className=\"text-xs\">Analytics generation might take up to 24 hours</p>\r\n                        </div>\r\n                    ) : (\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <AreaChart data={data} margin={{ top: 10, right: 10, left: 10, bottom: 0 }}>\r\n                                <defs>\r\n                                    <linearGradient id=\"colorRecv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.3} />\r\n                                        <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                    <linearGradient id=\"colorSent\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n                                        <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.05)\" vertical={false} />\r\n                                <XAxis\r\n                                    dataKey=\"date\"\r\n                                    stroke=\"rgba(255,255,255,0.2)\"\r\n                                    fontSize={10}\r\n                                    tickFormatter={formatDate}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    dy={10}\r\n                                />\r\n                                <YAxis\r\n                                    stroke=\"rgba(255,255,255,0.2)\"\r\n                                    fontSize={10}\r\n                                    tickFormatter={formatBytes}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    dx={-10}\r\n                                />\r\n                                <Tooltip\r\n                                    contentStyle={{\r\n                                        backgroundColor: 'rgba(0,0,0,0.8)',\r\n                                        borderColor: 'rgba(255,255,255,0.1)',\r\n                                        borderRadius: '16px',\r\n                                        backdropFilter: 'blur(10px)',\r\n                                        fontSize: '11px',\r\n                                        color: '#fff'\r\n                                    }}\r\n                                    itemStyle={{ padding: '2px 0' }}\r\n                                    labelFormatter={(l) => new Date(l).toDateString()}\r\n                                    formatter={(v: number) => [formatBytes(v), '']}\r\n                                />\r\n                                <Area\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"recv\"\r\n                                    name=\"Download\"\r\n                                    stroke=\"#3b82f6\"\r\n                                    strokeWidth={3}\r\n                                    fillOpacity={1}\r\n                                    fill=\"url(#colorRecv)\"\r\n                                    animationDuration={1500}\r\n                                />\r\n                                <Area\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"sent\"\r\n                                    name=\"Upload\"\r\n                                    stroke=\"#10b981\"\r\n                                    strokeWidth={3}\r\n                                    fillOpacity={1}\r\n                                    fill=\"url(#colorSent)\"\r\n                                    animationDuration={1500}\r\n                                />\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default YearlyStatsView;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\skeletons\\StatCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\components\\skeletons\\WidgetSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\config\\apiConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\config\\axiosInstance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUser'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUser, token]","fix":{"range":[1623,1630],"text":"[fetchUser, token]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":74,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":74,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport axiosInstance from '../config/axiosInstance';\r\n\r\ninterface User {\r\n    id: number;\r\n    username: string;\r\n    email: string;\r\n    full_name: string | null;\r\n    is_admin: boolean;\r\n}\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    token: string | null;\r\n    refreshToken: string | null;\r\n    login: (token: string, refreshToken: string) => Promise<void>;\r\n    logout: () => void;\r\n    isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [token, setToken] = useState<string | null>(localStorage.getItem('statsea_token'));\r\n    const [refreshToken, setRefreshToken] = useState<string | null>(localStorage.getItem('statsea_refresh_token'));\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const fetchUser = async () => {\r\n        try {\r\n            const response = await axiosInstance.get('/auth/me');\r\n            setUser(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch user:', error);\r\n            // logout() is called by axiosInstance on 401, \r\n            // but we call it here to ensure local state is cleared too\r\n            logout();\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            fetchUser();\r\n        } else {\r\n            setIsLoading(false);\r\n        }\r\n    }, [token]);\r\n\r\n    const login = async (newToken: string, newRefreshToken: string) => {\r\n        localStorage.setItem('statsea_token', newToken);\r\n        localStorage.setItem('statsea_refresh_token', newRefreshToken);\r\n        setToken(newToken);\r\n        setRefreshToken(newRefreshToken);\r\n        await fetchUser();\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('statsea_token');\r\n        localStorage.removeItem('statsea_refresh_token');\r\n        setToken(null);\r\n        setRefreshToken(null);\r\n        setUser(null);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, token, refreshToken, login, logout, isLoading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`applyTheme` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nD:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx:28:17\n  26 |                 const parsed = JSON.parse(savedThemeConfig);\n  27 |                 setThemeConfig(parsed);\n> 28 |                 applyTheme(parsed);\n     |                 ^^^^^^^^^^ `applyTheme` accessed before it is declared\n  29 |             } catch (e) {\n  30 |                 console.error(\"Failed to parse theme config\", e);\n  31 |                 setDefaultTheme();\n\nD:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx:73:5\n   71 |     };\n   72 |\n>  73 |     const applyTheme = (config: ThemeConfig) => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  74 |         const root = document.documentElement;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  75 |         const base = presets[config.mode];\n      ÔÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 105 |         }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 106 |     };\n      | ^^^^^^^ `applyTheme` is declared here\n  107 |\n  108 |     return (\n  109 |         <ThemeContext.Provider value={{ themeConfig, setThemeConfig, updateTheme }}>","line":28,"column":17,"nodeType":null,"endLine":28,"endColumn":27},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`setDefaultTheme` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nD:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx:31:17\n  29 |             } catch (e) {\n  30 |                 console.error(\"Failed to parse theme config\", e);\n> 31 |                 setDefaultTheme();\n     |                 ^^^^^^^^^^^^^^^ `setDefaultTheme` accessed before it is declared\n  32 |             }\n  33 |         } else if (legacyTheme) {\n  34 |             if (presets[legacyTheme as ThemeMode]) {\n\nD:\\Gravity\\StatSea\\frontend\\src\\context\\ThemeContext.tsx:50:5\n  48 |     }, []);\n  49 |\n> 50 |     const setDefaultTheme = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 51 |         const def = { mode: 'dark' as ThemeMode, accent: accentColors[0].value };\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 52 |         setThemeConfig(def);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 53 |         applyTheme(def);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 54 |         localStorage.setItem('themeConfig', JSON.stringify(def));\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 55 |     };\n     | ^^^^^^^ `setDefaultTheme` is declared here\n  56 |\n  57 |     const updateTheme = (updates: Partial<ThemeConfig>) => {\n  58 |         const newConfig = { ...themeConfig, ...updates };","line":31,"column":17,"nodeType":null,"endLine":31,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'setDefaultTheme'. Either include it or remove the dependency array.","line":48,"column":8,"nodeType":"ArrayExpression","endLine":48,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [setDefaultTheme]","fix":{"range":[1754,1756],"text":"[setDefaultTheme]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":115,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":115,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { ThemeConfig, ThemeMode, accentColors, presets } from '../lib/themes';\r\n\r\n\r\ninterface ThemeContextType {\r\n    themeConfig: ThemeConfig;\r\n    setThemeConfig: (config: ThemeConfig) => void;\r\n    updateTheme: (updates: Partial<ThemeConfig>) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n    const [themeConfig, setThemeConfig] = useState<ThemeConfig>({\r\n        mode: 'dark',\r\n        accent: accentColors[0].value\r\n    });\r\n\r\n    // Initial Load\r\n    useEffect(() => {\r\n        const savedThemeConfig = localStorage.getItem('themeConfig');\r\n        const legacyTheme = localStorage.getItem('theme');\r\n\r\n        if (savedThemeConfig) {\r\n            try {\r\n                const parsed = JSON.parse(savedThemeConfig);\r\n                setThemeConfig(parsed);\r\n                applyTheme(parsed);\r\n            } catch (e) {\r\n                console.error(\"Failed to parse theme config\", e);\r\n                setDefaultTheme();\r\n            }\r\n        } else if (legacyTheme) {\r\n            if (presets[legacyTheme as ThemeMode]) {\r\n                const newConfig: ThemeConfig = {\r\n                    mode: legacyTheme as ThemeMode,\r\n                    accent: presets[legacyTheme as ThemeMode].colors['--primary']\r\n                };\r\n                setThemeConfig(newConfig);\r\n                applyTheme(newConfig);\r\n                localStorage.setItem('themeConfig', JSON.stringify(newConfig));\r\n            } else {\r\n                setDefaultTheme();\r\n            }\r\n        } else {\r\n            setDefaultTheme();\r\n        }\r\n    }, []);\r\n\r\n    const setDefaultTheme = () => {\r\n        const def = { mode: 'dark' as ThemeMode, accent: accentColors[0].value };\r\n        setThemeConfig(def);\r\n        applyTheme(def);\r\n        localStorage.setItem('themeConfig', JSON.stringify(def));\r\n    };\r\n\r\n    const updateTheme = (updates: Partial<ThemeConfig>) => {\r\n        const newConfig = { ...themeConfig, ...updates };\r\n\r\n        if (updates.mode) {\r\n            const preset = presets[updates.mode];\r\n            // Optional: Auto-switch accent to the preset's primary color for better default look\r\n            if (preset) {\r\n                newConfig.accent = preset.colors['--primary'];\r\n            }\r\n        }\r\n\r\n        setThemeConfig(newConfig);\r\n        applyTheme(newConfig);\r\n        localStorage.setItem('themeConfig', JSON.stringify(newConfig));\r\n    };\r\n\r\n    const applyTheme = (config: ThemeConfig) => {\r\n        const root = document.documentElement;\r\n        const base = presets[config.mode];\r\n\r\n        if (!base) return;\r\n\r\n        // Apply mode class for Tailwind dark mode selector\r\n        if (config.mode === 'light') {\r\n            root.classList.remove('dark');\r\n            root.classList.add('light');\r\n        } else {\r\n            root.classList.remove('light');\r\n            root.classList.add('dark');\r\n        }\r\n\r\n        // Apply base theme variables\r\n        Object.entries(base.colors).forEach(([key, value]) => {\r\n            if (key !== '--accent' && key !== '--accent-foreground') {\r\n                root.style.setProperty(key, value);\r\n            }\r\n        });\r\n\r\n        // Apply accent color override\r\n        root.style.setProperty('--primary', config.accent);\r\n        root.style.setProperty('--ring', config.accent);\r\n        root.style.setProperty('--accent', config.accent);\r\n\r\n        // Special handling for radius if Cyberpunk\r\n        if (config.mode === 'cyberpunk') {\r\n            root.style.setProperty('--radius', '0px');\r\n        } else {\r\n            root.style.setProperty('--radius', '0.5rem');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ themeConfig, setThemeConfig, updateTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useTheme() {\r\n    const context = useContext(ThemeContext);\r\n    if (context === undefined) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\contexts\\WebSocketContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[410,413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[410,413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[828,831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[828,831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":158,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":158,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState, ReactNode } from 'react';\r\nimport { toast } from 'sonner';\r\nimport { getWsUrl } from '../config/apiConfig';\r\n\r\nexport interface Notification {\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    timestamp: Date;\r\n    read: boolean;\r\n    type: 'info' | 'warning' | 'error' | 'success';\r\n}\r\n\r\ninterface WebSocketContextType {\r\n    wsData: any[];\r\n    isConnected: boolean;\r\n    notifications: Notification[];\r\n    unreadCount: number;\r\n    markAsRead: (id: string) => void;\r\n    markAllAsRead: () => void;\r\n    clearNotifications: () => void;\r\n}\r\n\r\nconst WebSocketContext = createContext<WebSocketContextType | undefined>(undefined);\r\n\r\nexport const WebSocketProvider = ({ children }: { children: ReactNode }) => {\r\n    const [wsData, setWsData] = useState<any[]>([]);\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [notifications, setNotifications] = useState<Notification[]>([]);\r\n\r\n    const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n    const markAsRead = (id: string) => {\r\n        setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n));\r\n    };\r\n\r\n    const markAllAsRead = () => {\r\n        setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n    };\r\n\r\n    const clearNotifications = () => {\r\n        setNotifications([]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        let ws: WebSocket | null = null;\r\n        let eventWs: WebSocket | null = null;\r\n        let reconnectTimeout: NodeJS.Timeout;\r\n        let isMounted = true;\r\n\r\n        const connect = () => {\r\n            const wsUrl = getWsUrl('/ws/live');\r\n            const eventWsUrl = getWsUrl('/ws/events');\r\n\r\n            ws = new WebSocket(wsUrl);\r\n            eventWs = new WebSocket(eventWsUrl);\r\n\r\n            ws.onopen = () => {\r\n                if (isMounted) {\r\n                    setIsConnected(true);\r\n                    toast.success('Connected to Live Server');\r\n                }\r\n            };\r\n\r\n            ws.onclose = () => {\r\n                if (isMounted) {\r\n                    setIsConnected(false);\r\n                    // Reconnect after 3 seconds\r\n                    reconnectTimeout = setTimeout(connect, 3000);\r\n                }\r\n            };\r\n\r\n            let lastUpdate = 0;\r\n            const THROTTLE_MS = 500; // Max 2 updates per second\r\n\r\n            ws.onmessage = (event) => {\r\n                const now = Date.now();\r\n                if (now - lastUpdate < THROTTLE_MS) return;\r\n                lastUpdate = now;\r\n\r\n                try {\r\n                    const data = JSON.parse(event.data);\r\n                    setWsData(prev => {\r\n                        const newData = [...prev, {\r\n                            time: new Date(data.timestamp * 1000).toLocaleTimeString(),\r\n                            upload: data.u / 1024,\r\n                            download: data.d / 1024,\r\n                        }];\r\n                        if (newData.length > 20) newData.shift();\r\n                        return newData;\r\n                    });\r\n                } catch (e) {\r\n                    console.error(\"Failed to parse WS message\", e);\r\n                }\r\n            };\r\n\r\n            eventWs.onmessage = (event) => {\r\n                try {\r\n                    const data = JSON.parse(event.data);\r\n\r\n                    // Add to notifications list\r\n                    const newNotification: Notification = {\r\n                        id: Math.random().toString(36).substr(2, 9),\r\n                        title: data.title || 'New Event',\r\n                        description: data.description || '',\r\n                        timestamp: new Date(),\r\n                        read: false,\r\n                        type: data.type === 'error' ? 'error' :\r\n                            data.type === 'warning' ? 'warning' :\r\n                                data.type === 'success' ? 'success' : 'info'\r\n                    };\r\n\r\n                    setNotifications(prev => [newNotification, ...prev]);\r\n\r\n                    // Show toast for high priority events or new devices\r\n                    if (data.type === 'NEW_DEVICE' || data.type === 'security_alert') {\r\n                        toast.warning(data.title, {\r\n                            description: data.description,\r\n                            duration: 5000,\r\n                        });\r\n                    } else {\r\n                        toast.info(data.title, {\r\n                            description: data.description,\r\n                        });\r\n                    }\r\n\r\n                } catch (e) {\r\n                    console.error(\"Failed to parse event message\", e);\r\n                }\r\n            };\r\n        };\r\n\r\n        connect();\r\n\r\n        return () => {\r\n            isMounted = false;\r\n            if (ws) ws.close();\r\n            if (eventWs) eventWs.close();\r\n            clearTimeout(reconnectTimeout);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <WebSocketContext.Provider value={{\r\n            wsData,\r\n            isConnected,\r\n            notifications,\r\n            unreadCount,\r\n            markAsRead,\r\n            markAllAsRead,\r\n            clearNotifications\r\n        }}>\r\n            {children}\r\n        </WebSocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useWebSocket = () => {\r\n    const context = useContext(WebSocketContext);\r\n    if (context === undefined) {\r\n        throw new Error('useWebSocket must be used within a WebSocketProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\lib\\themes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\pages\\LoginPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1462,1465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1462,1465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Shield, Lock, User, ArrowRight, AlertCircle, Loader2 } from 'lucide-react';\r\nimport axiosInstance from '../config/axiosInstance';\r\nimport { toast } from 'sonner';\r\n\r\nconst LoginPage: React.FC = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n    const { login } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        const formData = new FormData();\r\n        formData.append('username', username);\r\n        formData.append('password', password);\r\n        formData.append('remember_me', String(rememberMe));\r\n\r\n        try {\r\n            const response = await axiosInstance.post('/auth/login', formData, {\r\n                headers: { 'Content-Type': 'multipart/form-data' }\r\n            });\r\n            const { access_token, refresh_token } = response.data;\r\n            await login(access_token, refresh_token);\r\n            navigate('/');\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Invalid username or password');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0f172a] flex items-center justify-center p-4 relative overflow-hidden\">\r\n            {/* Background Glows */}\r\n            <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full\" />\r\n            <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-500/10 blur-[120px] rounded-full\" />\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"w-full max-w-md\"\r\n            >\r\n                <div className=\"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-3xl p-8 shadow-2xl overflow-hidden relative\">\r\n                    {/* Header */}\r\n                    <div className=\"text-center mb-8\">\r\n                        <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-500/10 rounded-2xl mb-4 border border-blue-500/20\">\r\n                            <Shield className=\"w-8 h-8 text-blue-500\" />\r\n                        </div>\r\n                        <h1 className=\"text-3xl font-bold text-white mb-2\">StatSea</h1>\r\n                        <p className=\"text-slate-400\">Secure Network Intelligence Dashboard</p>\r\n                    </div>\r\n\r\n                    {/* Form */}\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        <div className=\"space-y-4\">\r\n                            {/* Username */}\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-slate-300 ml-1\">Username</label>\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <User className=\"w-5 h-5 text-slate-500 group-focus-within:text-blue-500 transition-colors\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={username}\r\n                                        onChange={(e) => setUsername(e.target.value)}\r\n                                        className=\"w-full bg-slate-950/50 border border-slate-800 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all\"\r\n                                        placeholder=\"Enter your username\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Password */}\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium text-slate-300 ml-1\">Password</label>\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <Lock className=\"w-5 h-5 text-slate-500 group-focus-within:text-blue-500 transition-colors\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        value={password}\r\n                                        onChange={(e) => setPassword(e.target.value)}\r\n                                        className=\"w-full bg-slate-950/50 border border-slate-800 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all\"\r\n                                        placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Remember Me */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n                                <div className=\"relative\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={rememberMe}\r\n                                        onChange={(e) => setRememberMe(e.target.checked)}\r\n                                        className=\"sr-only peer\"\r\n                                    />\r\n                                    <div className=\"w-5 h-5 bg-slate-950/50 border border-slate-800 rounded-md peer-checked:bg-blue-600 peer-checked:border-blue-600 transition-all\" />\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center opacity-0 peer-checked:opacity-100 transition-opacity\">\r\n                                        <Shield className=\"w-3 h-3 text-white\" />\r\n                                    </div>\r\n                                </div>\r\n                                <span className=\"text-sm text-slate-400 group-hover:text-slate-300 transition-colors\">Remember me</span>\r\n                            </label>\r\n\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"text-sm text-blue-500 hover:text-blue-400 transition-colors font-medium\"\r\n                                onClick={() => toast.info(\"Please contact your administrator to reset password.\")}\r\n                            >\r\n                                Forgot Password?\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Error Message */}\r\n                        <AnimatePresence>\r\n                            {error && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, height: 0 }}\r\n                                    animate={{ opacity: 1, height: 'auto' }}\r\n                                    exit={{ opacity: 0, height: 0 }}\r\n                                    className=\"bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3 text-red-500 text-sm\"\r\n                                >\r\n                                    <AlertCircle className=\"w-4 h-4 shrink-0\" />\r\n                                    <span>{error}</span>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n\r\n                        {/* Submit Button */}\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-blue-800 disabled:cursor-not-allowed text-white font-semibold py-4 rounded-xl shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2 transition-all active:scale-[0.98]\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                            ) : (\r\n                                <>\r\n                                    Sign In\r\n                                    <ArrowRight className=\"w-5 h-5\" />\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    {/* Footer */}\r\n                    <div className=\"mt-8 pt-6 border-t border-slate-800/50 text-center\">\r\n                        <p className=\"text-slate-500 text-xs\">\r\n                            Access restricted to authorized personnel only.\r\n                            <br />All activity is being monitored and logged.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\services\\SpeedtestService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\src\\utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\vite.config.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VitePWA' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":17,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"VitePWA"},"fix":{"range":[79,122],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { defineConfig } from 'vite'\r\nimport react from '@vitejs/plugin-react'\r\nimport { VitePWA } from 'vite-plugin-pwa'\r\nimport path from \"path\"\r\n\r\n// https://vitejs.dev/config/\r\nexport default defineConfig({\r\n    plugins: [\r\n        react(),\r\n        // VitePWA({\r\n        //     registerType: 'autoUpdate',\r\n        //     includeAssets: ['favicon.ico', 'apple-touch-icon.png', 'mask-icon.svg'],\r\n        //     manifest: {\r\n        //         name: 'StatSea Network Monitor',\r\n        //         short_name: 'StatSea',\r\n        //         description: 'Advanced Network Monitoring Dashboard',\r\n        //         theme_color: '#0f172a',\r\n        //         background_color: '#0f172a',\r\n        //         display: 'standalone',\r\n        //         icons: [\r\n        //             {\r\n        //                 src: 'pwa-icon.svg',\r\n        //                 sizes: '192x192 512x512',\r\n        //                 type: 'image/svg+xml',\r\n        //                 purpose: 'any maskable'\r\n        //             }\r\n        //         ]\r\n        //     }\r\n        // })\r\n    ],\r\n    resolve: {\r\n        alias: {\r\n            \"@\": path.resolve(__dirname, \"./src\"),\r\n        },\r\n    },\r\n    server: {\r\n        host: true,\r\n        port: 5173,\r\n        proxy: {\r\n            '/api': {\r\n                target: 'http://localhost:8001',\r\n                changeOrigin: true,\r\n                secure: false,\r\n                ws: true\r\n            }\r\n        }\r\n    }\r\n})\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Gravity\\StatSea\\frontend\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
